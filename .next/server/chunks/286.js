"use strict";exports.id=286,exports.ids=[286],exports.modules={452:(a,b,c)=>{c.d(b,{cn:()=>d});function d(...a){return a.filter(Boolean).join(" ")}},552:(a,b,c)=>{c.d(b,{A:()=>E});var d=c(8732),e=c(2015),f=c.n(e),g=c(1851),h=c(6016),i=c(5208),j=c(37),k=c.t(j,2),l=c(452),m=c(7849);let n=[{label:"Small",value:"12px"},{label:"Normal",value:"16px"},{label:"Large",value:"20px"},{label:"X-Large",value:"28px"}],o=[{label:"Inter",value:"Inter, sans-serif"},{label:"Serif",value:"Georgia, serif"},{label:"Mono",value:'SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace'},{label:"Playfair",value:"Playfair Display, serif"}];function p({content:a,onChange:b,type:c="text"}){let f=(0,e.useRef)(null),[g,h]=(0,e.useState)(!1),[i,k]=(0,e.useState)(""),[l,m]=(0,e.useState)(""),[p,q]=(0,e.useState)("16px"),[r,s]=(0,e.useState)("#000000"),t=()=>{f.current&&b(f.current.innerHTML)},u=()=>{k(window.getSelection().toString()),h(!0)},v=(a,b=null)=>{document.execCommand(a,!1,b),f.current?.focus(),t()},w=a=>{let b=window.getSelection();if(b.rangeCount>0){let c=b.getRangeAt(0);c.deleteContents();let d=document.createElement("div");d.innerHTML=a;let e=document.createDocumentFragment();for(;d.firstChild;)e.appendChild(d.firstChild);c.insertNode(e),b.removeAllRanges()}t()},x=({onClick:a,icon:b,title:c,isActive:e=!1})=>(0,d.jsx)("button",{type:"button",onClick:a,className:`p-2 rounded hover:bg-earth-100 transition-colors ${e?"bg-earth-200 text-accent":"text-earth-600"}`,title:c,children:(0,d.jsx)(b,{size:16})});return(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsxs)("div",{className:"flex flex-wrap gap-1 mb-2 items-center bg-white border border-earth-200 rounded-lg p-2 shadow-sm sticky top-0 z-10 w-full max-w-full overflow-x-auto",children:[(0,d.jsx)(x,{onClick:()=>v("bold"),icon:j.Bold,title:"Bold",isActive:document.queryCommandState("bold")}),(0,d.jsx)(x,{onClick:()=>v("italic"),icon:j.Italic,title:"Italic",isActive:document.queryCommandState("italic")}),(0,d.jsx)(x,{onClick:()=>v("underline"),icon:j.Underline,title:"Underline",isActive:document.queryCommandState("underline")}),(0,d.jsx)(x,{onClick:()=>v("insertUnorderedList"),icon:j.List,title:"Bullet List"}),(0,d.jsx)(x,{onClick:()=>v("insertOrderedList"),icon:j.ListOrdered,title:"Numbered List"}),(0,d.jsx)(x,{onClick:()=>{w(`
      <div class="flex items-center gap-2 my-2">
        <input type="checkbox" class="rounded border-earth-300 text-accent focus:ring-accent" />
        <span contenteditable="true" class="flex-1">New task</span>
      </div>
    `)},icon:j.CheckSquare,title:"Todo"}),(0,d.jsx)(x,{onClick:()=>{w(`
      <blockquote class="border-l-4 border-accent pl-4 my-4 italic text-earth-600">
        <p contenteditable="true">Your quote here...</p>
      </blockquote>
    `)},icon:j.Quote,title:"Quote"}),(0,d.jsx)(x,{onClick:()=>{w(`
      <pre class="bg-earth-100 rounded-lg p-4 my-4 overflow-x-auto">
        <code contenteditable="true" class="text-earth-800 font-mono text-sm">// Your code here</code>
      </pre>
    `)},icon:j.Code,title:"Code Block"}),(0,d.jsx)("div",{className:"w-px h-6 bg-earth-200 mx-2"}),(0,d.jsx)("select",{value:l,onChange:a=>{m(a.target.value),v("fontName",a.target.value)},className:"rounded px-2 py-1 border border-earth-200 text-xs focus:outline-accent",title:"Font family",children:o.map(a=>(0,d.jsx)("option",{value:a.value,style:{fontFamily:a.value},children:a.label},a.value))}),(0,d.jsx)("select",{value:p,onChange:a=>{q(a.target.value),v("fontSize",n.findIndex(b=>b.value===a.target.value)+1)},className:"rounded px-2 py-1 border border-earth-200 text-xs focus:outline-accent",title:"Font size",children:n.map((a,b)=>(0,d.jsx)("option",{value:a.value,children:a.label},a.value))}),(0,d.jsx)("input",{type:"color",value:r,onChange:a=>{s(a.target.value),v("foreColor",a.target.value)},className:"w-6 h-6 rounded border border-earth-200 ml-2",title:"Text color"}),(0,d.jsx)("button",{type:"button",className:"ml-1 px-2 py-1 rounded bg-earth-100 hover:bg-earth-200 text-xs text-earth-700",onClick:()=>v("removeFormat"),title:"Clear formatting",children:"Clear"})]}),(0,d.jsx)("div",{ref:f,contentEditable:!0,suppressContentEditableWarning:!0,onInput:t,onMouseUp:u,onKeyUp:u,onBlur:()=>h(!1),className:"prose prose-earth max-w-full w-full min-h-[120px] p-4 rounded-lg border border-earth-200 focus:outline-none focus:ring-2 focus:ring-accent/20 focus:border-accent overflow-x-auto",style:{lineHeight:"1.7",fontSize:p,fontFamily:l,color:r},placeholder:"Start typing..."})]})}function q({content:a,onChange:b,onSave:c,onCancel:f}){let[g,h]=(0,e.useState)(()=>a&&a.rows?a:{rows:[["Header 1","Header 2","Header 3"],["Row 1 Col 1","Row 1 Col 2","Row 1 Col 3"],["Row 2 Col 1","Row 2 Col 2","Row 2 Col 3"]],hasHeader:!0}),i=(a,c,d)=>{let e=[...g.rows];e[a][c]=d;let f={...g,rows:e};h(f),b(f)};return(0,d.jsxs)("div",{className:"bg-white rounded-lg border border-earth-200 p-4",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 mb-4 flex-wrap",children:[(0,d.jsxs)("button",{onClick:()=>{let a=Array(g.rows[0]?.length||3).fill(""),c={...g,rows:[...g.rows,a]};h(c),b(c)},className:"px-3 py-1 bg-earth-100 hover:bg-earth-200 rounded text-sm flex items-center gap-1",children:[(0,d.jsx)(j.Plus,{size:14}),"Add Row"]}),(0,d.jsxs)("button",{onClick:()=>{let a=g.rows.map(a=>[...a,""]),c={...g,rows:a};h(c),b(c)},className:"px-3 py-1 bg-earth-100 hover:bg-earth-200 rounded text-sm flex items-center gap-1",children:[(0,d.jsx)(j.Plus,{size:14}),"Add Column"]}),(0,d.jsx)("button",{onClick:()=>{let a={...g,hasHeader:!g.hasHeader};h(a),b(a)},className:`px-3 py-1 rounded text-sm ${g.hasHeader?"bg-accent text-white":"bg-earth-100 hover:bg-earth-200"}`,children:"Header Row"})]}),(0,d.jsx)("div",{className:"overflow-x-auto mb-4",children:(0,d.jsx)("table",{className:"w-full border-collapse border border-earth-300",children:(0,d.jsx)("tbody",{children:g.rows.map((a,c)=>(0,d.jsxs)("tr",{children:[a.map((a,e)=>(0,d.jsx)("td",{className:"border border-earth-300 p-2 relative group",children:0===c&&g.hasHeader?(0,d.jsxs)("div",{className:"relative group",children:[(0,d.jsx)("input",{type:"text",value:a,onChange:a=>i(c,e,a.target.value),className:"w-full bg-earth-50 font-semibold focus:outline-none focus:bg-white",placeholder:"Header"}),(0,d.jsx)("button",{onClick:()=>(a=>{if(g.rows[0]?.length<=1)return;let c=g.rows.map(b=>b.filter((b,c)=>c!==a)),d={...g,rows:c};h(d),b(d)})(e),className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity p-1 bg-red-100 hover:bg-red-200 rounded text-red-600 z-10",title:"Remove column",style:{pointerEvents:"auto"},children:(0,d.jsx)(j.Minus,{size:12})})]}):(0,d.jsx)("input",{type:"text",value:a,onChange:a=>i(c,e,a.target.value),className:"w-full bg-transparent focus:outline-none focus:bg-earth-50",placeholder:"Cell content"})},e)),(0,d.jsx)("td",{className:"border-none p-2 group",children:(0,d.jsx)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:(0,d.jsx)("button",{onClick:()=>(a=>{if(g.rows.length<=1)return;let c=g.rows.filter((b,c)=>c!==a),d={...g,rows:c};h(d),b(d)})(c),className:"p-1 bg-red-100 hover:bg-red-200 rounded text-red-600",title:"Remove row",children:(0,d.jsx)(j.Minus,{size:12})})})})]},c))})})}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsxs)("button",{onClick:c,className:"px-4 py-2 bg-accent text-white rounded hover:bg-accent/90 flex items-center gap-2",children:[(0,d.jsx)(j.Save,{size:16}),"Save Table"]}),(0,d.jsxs)("button",{onClick:f,className:"px-4 py-2 bg-earth-100 hover:bg-earth-200 rounded flex items-center gap-2",children:[(0,d.jsx)(j.X,{size:16}),"Cancel"]})]})]})}function r({content:a,onChange:b,onSave:c,onCancel:f}){let[g,h]=(0,e.useState)(()=>a&&a.url?a:{url:"",alt:"",caption:"",width:"auto",alignment:"center"}),[i,k]=(0,e.useState)("url"),l=a=>{let c={...g,...a};h(c),b&&b(c)};return(0,d.jsxs)("div",{className:"bg-white rounded-lg border border-earth-200 p-4",children:[(0,d.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,d.jsx)(j.Image,{size:20}),"Add Image"]}),(0,d.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,d.jsxs)("button",{onClick:()=>k("url"),className:`px-3 py-2 rounded text-sm ${"url"===i?"bg-accent text-white":"bg-earth-100 hover:bg-earth-200"}`,children:[(0,d.jsx)(j.Link,{size:14,className:"inline mr-1"}),"URL"]}),(0,d.jsxs)("button",{onClick:()=>k("upload"),className:`px-3 py-2 rounded text-sm ${"upload"===i?"bg-accent text-white":"bg-earth-100 hover:bg-earth-200"}`,children:[(0,d.jsx)(j.Upload,{size:14,className:"inline mr-1"}),"Upload"]}),(0,d.jsxs)("button",{onClick:()=>k("sample"),className:`px-3 py-2 rounded text-sm ${"sample"===i?"bg-accent text-white":"bg-earth-100 hover:bg-earth-200"}`,children:[(0,d.jsx)(j.Image,{size:14,className:"inline mr-1"}),"Sample"]})]}),"url"===i&&(0,d.jsx)("div",{className:"mb-4",children:(0,d.jsx)("input",{type:"text",value:g.url,onChange:a=>l({url:a.target.value}),placeholder:"Paste image URL...",className:"w-full px-3 py-2 border border-earth-300 rounded focus:ring-2 focus:ring-accent focus:border-accent"})}),"upload"===i&&(0,d.jsx)("div",{className:"mb-4",children:(0,d.jsx)("input",{type:"file",accept:"image/*",onChange:a=>{let b=a.target.files[0];if(b){let a=new FileReader;a.onload=a=>{l({url:a.target.result})},a.readAsDataURL(b)}},className:"w-full"})}),"sample"===i&&(0,d.jsx)("div",{className:"mb-4 grid grid-cols-2 gap-2",children:["https://images.pexels.com/photos/1181533/pexels-photo-1181533.jpeg?auto=compress&cs=tinysrgb&w=800","https://images.pexels.com/photos/1181244/pexels-photo-1181244.jpeg?auto=compress&cs=tinysrgb&w=800","https://images.pexels.com/photos/1181316/pexels-photo-1181316.jpeg?auto=compress&cs=tinysrgb&w=800","https://images.pexels.com/photos/1181406/pexels-photo-1181406.jpeg?auto=compress&cs=tinysrgb&w=800"].map(a=>(0,d.jsx)("img",{src:a,alt:"Sample",className:"rounded cursor-pointer border-2 border-transparent hover:border-accent",style:{maxHeight:80,objectFit:"cover"},onClick:()=>l({url:a})},a))}),g.url&&(0,d.jsx)("div",{className:"mb-4 text-center",children:(0,d.jsx)("img",{src:g.url,alt:g.alt||"",className:"rounded max-w-full mx-auto",style:{maxHeight:240,display:"block",margin:"0 auto"}})}),(0,d.jsxs)("div",{className:"mb-4 flex gap-2",children:[(0,d.jsx)("input",{type:"text",value:g.alt,onChange:a=>l({alt:a.target.value}),placeholder:"Alt text (for accessibility)",className:"flex-1 px-3 py-2 border border-earth-300 rounded focus:ring-2 focus:ring-accent focus:border-accent"}),(0,d.jsx)("input",{type:"text",value:g.caption,onChange:a=>l({caption:a.target.value}),placeholder:"Caption (optional)",className:"flex-1 px-3 py-2 border border-earth-300 rounded focus:ring-2 focus:ring-accent focus:border-accent"})]}),(0,d.jsxs)("div",{className:"flex gap-2 justify-end",children:[f&&(0,d.jsx)("button",{onClick:f,className:"px-3 py-1 rounded bg-earth-100 hover:bg-earth-200 text-earth-700",children:"Cancel"}),c&&(0,d.jsxs)("button",{onClick:()=>c(g),className:"px-3 py-1 rounded bg-accent text-white hover:bg-accent/90 flex items-center gap-1",children:[(0,d.jsx)(j.Save,{size:16})," Save"]})]})]})}function s({content:a,onChange:b,onSave:c,onCancel:f}){let[g,h]=(0,e.useState)(()=>a&&a.icon?a:{icon:"Star",text:"Your text here",size:"medium",color:"#C4A484",layout:"horizontal"}),[i,l]=(0,e.useState)(""),m=Object.keys(k).filter(a=>"default"!==a&&"createLucideIcon"!==a&&"function"==typeof k[a]).filter(a=>a.toLowerCase().includes(i.toLowerCase())).slice(0,50),n=a=>{let c={...g,...a};h(c),b&&b(c)},o=k[g.icon]||j.Star;return(0,d.jsxs)("div",{className:"bg-white rounded-lg border border-earth-200 p-4",children:[(0,d.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,d.jsx)(o,{size:20}),"Add Icon Block"]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Choose Icon"}),(0,d.jsxs)("div",{className:"relative mb-3",children:[(0,d.jsx)(j.Search,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-earth-400"}),(0,d.jsx)("input",{type:"text",value:i,onChange:a=>l(a.target.value),placeholder:"Search icons...",className:"w-full pl-10 pr-4 py-2 border border-earth-300 rounded focus:ring-2 focus:ring-accent focus:border-accent"})]}),(0,d.jsx)("div",{className:"grid grid-cols-8 gap-2 max-h-48 overflow-y-auto border border-earth-200 rounded p-2",children:m.map(a=>{let b=k[a];return(0,d.jsx)("button",{onClick:()=>n({icon:a}),className:`p-2 rounded hover:bg-earth-100 flex items-center justify-center ${g.icon===a?"bg-accent text-white":""}`,children:(0,d.jsx)(b,{size:20})},a)})})]}),(0,d.jsx)("div",{className:"flex items-center gap-4 mb-4",children:(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(o,{size:{small:16,medium:24,large:32,xlarge:48}[g.size]||24,color:g.color}),(0,d.jsx)("input",{type:"text",value:g.text,onChange:a=>n({text:a.target.value}),className:"bg-transparent border-b border-earth-200 outline-none text-base font-medium px-2",placeholder:"Icon text..."})]})}),(0,d.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,d.jsx)("label",{className:"text-sm",children:"Size:"}),(0,d.jsxs)("select",{value:g.size,onChange:a=>n({size:a.target.value}),className:"rounded px-2 py-1 border border-earth-200 text-xs focus:outline-accent",children:[(0,d.jsx)("option",{value:"small",children:"Small"}),(0,d.jsx)("option",{value:"medium",children:"Medium"}),(0,d.jsx)("option",{value:"large",children:"Large"}),(0,d.jsx)("option",{value:"xlarge",children:"X-Large"})]}),(0,d.jsx)("label",{className:"text-sm ml-4",children:"Color:"}),(0,d.jsx)("div",{className:"flex gap-2 items-center",children:["#C4A484","#4A3B2F","#8A6F53","#D4B5A0","#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#6B7280","#000000"].map(a=>(0,d.jsx)("button",{type:"button",onClick:()=>n({color:a}),style:{backgroundColor:a,borderColor:a===g.color?"#8A6F53":"#ddd"},className:`w-6 h-6 rounded-full border-2 transition-all ${a===g.color?"ring-2 ring-accent scale-110":""} hover:scale-105 hover:ring-2 hover:ring-accent/40`,title:a,children:a===g.color&&(0,d.jsx)("span",{className:"block w-2 h-2 rounded-full bg-white mx-auto my-auto mt-2"})},a))})]}),(0,d.jsxs)("div",{className:"flex gap-2 justify-end",children:[f&&(0,d.jsx)("button",{onClick:f,className:"px-3 py-1 rounded bg-earth-100 hover:bg-earth-200 text-earth-700",children:"Cancel"}),c&&(0,d.jsxs)("button",{onClick:()=>c(g),className:"px-3 py-1 rounded bg-accent text-white hover:bg-accent/90 flex items-center gap-1",children:[(0,d.jsx)(j.Save,{size:16})," Save"]})]})]})}function t({content:a,onChange:b,onSave:c,onCancel:f}){let[g,h]=(0,e.useState)(()=>a&&a.text?a:{text:"This is an important announcement!",type:"info",showIcon:!0,dismissible:!1}),i=[{type:"info",label:"Info",icon:j.Info,bgColor:"bg-blue-50",borderColor:"border-blue-200",textColor:"text-blue-800",iconColor:"text-blue-600"},{type:"success",label:"Success",icon:j.CheckCircle,bgColor:"bg-green-50",borderColor:"border-green-200",textColor:"text-green-800",iconColor:"text-green-600"},{type:"warning",label:"Warning",icon:j.AlertTriangle,bgColor:"bg-yellow-50",borderColor:"border-yellow-200",textColor:"text-yellow-800",iconColor:"text-yellow-600"},{type:"error",label:"Error",icon:j.AlertCircle,bgColor:"bg-red-50",borderColor:"border-red-200",textColor:"text-red-800",iconColor:"text-red-600"},{type:"neutral",label:"Neutral",icon:j.Flag,bgColor:"bg-earth-50",borderColor:"border-earth-200",textColor:"text-earth-800",iconColor:"text-earth-600"}],k=a=>{let c={...g,...a};h(c),b&&b(c)},l=i.find(a=>a.type===g.type)||i[0],m=l.icon;return(0,d.jsxs)("div",{className:"bg-white rounded-lg border border-earth-200 p-4",children:[(0,d.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,d.jsx)(j.Flag,{size:20}),"Add Banner"]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Banner Type"}),(0,d.jsx)("div",{className:"grid grid-cols-5 gap-2",children:i.map(a=>{let b=a.icon;return(0,d.jsxs)("button",{onClick:()=>k({type:a.type}),className:`p-3 rounded border-2 flex flex-col items-center gap-1 transition-all ${g.type===a.type?`${a.borderColor} ${a.bgColor}`:"border-earth-200 hover:border-earth-300"}`,children:[(0,d.jsx)(b,{size:20,className:a.iconColor}),(0,d.jsx)("span",{className:`text-xs font-medium ${a.textColor}`,children:a.label})]},a.type)})})]}),(0,d.jsxs)("div",{className:`flex items-center gap-3 rounded border p-3 mb-4 ${l.bgColor} ${l.borderColor}`,children:[!1!==g.showIcon&&(0,d.jsx)(m,{size:24,className:l.iconColor}),(0,d.jsx)("input",{type:"text",value:g.text,onChange:a=>k({text:a.target.value}),className:`flex-1 bg-transparent border-none outline-none text-base font-medium ${l.textColor}`,placeholder:"Banner text..."})]}),(0,d.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,d.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,d.jsx)("input",{type:"checkbox",checked:!1!==g.showIcon,onChange:a=>k({showIcon:a.target.checked})}),"Show icon"]}),(0,d.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,d.jsx)("input",{type:"checkbox",checked:g.dismissible||!1,onChange:a=>k({dismissible:a.target.checked})}),"Dismissible"]})]}),(0,d.jsxs)("div",{className:"flex gap-2 justify-end",children:[f&&(0,d.jsx)("button",{onClick:f,className:"px-3 py-1 rounded bg-earth-100 hover:bg-earth-200 text-earth-700",children:"Cancel"}),c&&(0,d.jsxs)("button",{onClick:()=>c(g),className:"px-3 py-1 rounded bg-accent text-white hover:bg-accent/90 flex items-center gap-1",children:[(0,d.jsx)(j.Save,{size:16})," Save"]})]})]})}let u=a=>a.replace(/<[^>]+>/g,"").trim();function v({section:a,onSave:b,children:c,isDraggingOverlay:g=!1,isEditing:n,onEdit:o}){let{addSection:v,updateSection:w,deleteSection:x,sections:y}=(0,m.b)(),[z,A]=(0,e.useState)(!1),B=["text","table","image","icon","banner"].includes(a.type)?n:z,[C,D]=(0,e.useState)(!0),[E,F]=(0,e.useState)(a.content??""),[G,H]=(0,e.useState)(a.content??""),[I,J]=(0,e.useState)(a.headingColor||"#000000"),[K,L]=(0,e.useState)(!!a.headingBold),[M,N]=(0,e.useState)(!!a.headingItalic),[O,P]=(0,e.useState)(!!a.headingUnderline),Q=[{label:"Default",val:""},{label:"Serif",val:"serif"},{label:"Sans",val:"Inter, sans-serif"},{label:"Playfair",val:'"Playfair Display", serif'},{label:"Monospace",val:"monospace"},{label:"Georgia",val:"Georgia, serif"},{label:"Courier New",val:'"Courier New", monospace'}],[R,S]=(0,e.useState)(a.headingFont||""),T="proibe_heading_colors",U=["#000000","#DEB887","#B5C18E","#8B4513","#A0522D"],[V,W]=(0,e.useState)(()=>{try{return JSON.parse(localStorage.getItem(T))||[]}catch{return[]}}),X=[...U,...V],[Y,Z]=(0,e.useState)("#000000"),{attributes:$,listeners:_,setNodeRef:aa,transform:ab,transition:ac,isDragging:ad}=(0,h.useSortable)({id:a.id}),ae=g?void 0:{transform:i.CSS.Transform.toString(ab),transition:ac,zIndex:+!!ad},af=()=>{let b=y.filter(b=>b.parent===a.parent),c=b.findIndex(b=>b.id===a.id);return c>0?b[c-1]:null},ag=()=>{w(a.id,{content:E}),b&&b(a.id,E),A(!1),o&&o(null)};function ah(a){if(a.preventDefault(),!V.includes(Y)&&!U.includes(Y)){let a=[...V,Y];W(a),localStorage.setItem(T,JSON.stringify(a))}J(Y)}if("text"===a.type)if(B)return(0,d.jsxs)("div",{ref:aa,className:"flex items-start group relative",style:{paddingLeft:0,paddingRight:0,marginTop:a.parent?"18px":"0",marginBottom:"2px"},children:[(0,d.jsx)("div",{...$,..._,className:"ml-2 mt-2 opacity-0 group-hover:opacity-100 cursor-grab transition-opacity",style:{minWidth:20},title:"Drag",children:(0,d.jsx)(j.GripVertical,{className:"text-light-brown"})}),(0,d.jsxs)("div",{className:"flex-1 bg-white rounded-xl shadow-sm border border-light-brown/10 p-2 ml-1",children:[(0,d.jsx)(p,{content:E,onChange:F,type:a.type}),(0,d.jsxs)("button",{onClick:ag,className:"mt-2 px-3 py-1.5 bg-light-brown/10 rounded hover:bg-light-brown/20 text-light-brown flex items-center",children:[(0,d.jsx)(j.Save,{size:14,className:"mr-1"}),"Save"]})]}),(0,d.jsx)("button",{onClick:()=>x(a.id),className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity p-1.5 rounded-full hover:bg-red-100 text-red-500 z-10",title:"Delete",children:(0,d.jsx)(j.Trash2,{size:16})})]});else return(0,d.jsxs)("div",{ref:aa,className:"flex items-start group relative",style:{paddingLeft:0,paddingRight:0,marginTop:a.parent?"18px":"0",marginBottom:"2px"},children:[(0,d.jsx)("div",{...$,..._,className:"ml-2 mt-2 opacity-0 group-hover:opacity-100 cursor-grab transition-opacity",style:{minWidth:20},title:"Drag",children:(0,d.jsx)(j.GripVertical,{className:"text-light-brown"})}),(0,d.jsx)("div",{className:"flex-1 prose max-w-none tiptap bg-white rounded-xl shadow-sm border border-light-brown/10 p-2 ml-1",dangerouslySetInnerHTML:{__html:E&&E.trim()?E:'<span class="text-earth-400 italic">Click to add text…</span>'},onClick:()=>o&&o(a.id),title:"Click to edit",style:{cursor:"pointer",minHeight:32}}),(0,d.jsx)("button",{onClick:()=>x(a.id),className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity p-1.5 rounded-full hover:bg-red-100 text-red-500 z-10",title:"Delete",children:(0,d.jsx)(j.Trash2,{size:16})})]});if("table"===a.type)if(B)return(0,d.jsxs)("div",{ref:aa,className:"flex items-start group relative",style:{paddingLeft:0,paddingRight:0,marginTop:a.parent?"18px":"0",marginBottom:"2px"},children:[(0,d.jsx)("div",{...$,..._,className:"ml-2 mt-2 opacity-0 group-hover:opacity-100 cursor-grab transition-opacity",style:{minWidth:20},title:"Drag",children:(0,d.jsx)(j.GripVertical,{className:"text-light-brown"})}),(0,d.jsx)("div",{className:"flex-1 bg-white rounded-xl shadow-sm border border-light-brown/10 p-2 ml-1",children:(0,d.jsx)(q,{content:E,onChange:F,onSave:ag,onCancel:()=>o&&o(null)})}),(0,d.jsx)("button",{onClick:()=>x(a.id),className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity p-1.5 rounded-full hover:bg-red-100 text-red-500 z-10",title:"Delete",children:(0,d.jsx)(j.Trash2,{size:16})})]});else return(0,d.jsxs)("div",{ref:aa,className:"flex items-start group relative",style:{paddingLeft:0,paddingRight:0,marginTop:a.parent?"18px":"0",marginBottom:"2px"},children:[(0,d.jsx)("div",{...$,..._,className:"ml-2 mt-2 opacity-0 group-hover:opacity-100 cursor-grab transition-opacity",style:{minWidth:20},title:"Drag",children:(0,d.jsx)(j.GripVertical,{className:"text-light-brown"})}),(0,d.jsx)("div",{className:"flex-1 overflow-x-auto bg-earth-50 rounded-lg border border-earth-200 p-4 min-h-[60px] cursor-pointer hover:bg-earth-100 transition",onClick:()=>o&&o(a.id),title:"Click to edit table",children:E&&E.rows&&E.rows.length>0?(0,d.jsx)("table",{className:"min-w-[200px] border border-earth-200 text-sm w-full",children:(0,d.jsx)("tbody",{children:E.rows.map((a,b)=>(0,d.jsx)("tr",{children:a.map((a,c)=>(0,d.jsx)("td",{className:`border border-earth-200 px-2 py-1 ${0===b&&E.hasHeader?"font-semibold bg-earth-100":""}`,children:a},c))},b))})}):(0,d.jsx)("span",{className:"text-earth-400 italic",children:"Empty table"})}),(0,d.jsx)("button",{onClick:()=>x(a.id),className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity p-1.5 rounded-full hover:bg-red-100 text-red-500 z-10",title:"Delete",children:(0,d.jsx)(j.Trash2,{size:16})})]});if("image"===a.type)if(B)return(0,d.jsxs)("div",{ref:aa,className:"flex items-start group relative",style:{paddingLeft:0,paddingRight:0,marginTop:a.parent?"18px":"0",marginBottom:"2px"},children:[(0,d.jsx)("div",{...$,..._,className:"ml-2 mt-2 opacity-0 group-hover:opacity-100 cursor-grab transition-opacity",style:{minWidth:20},title:"Drag",children:(0,d.jsx)(j.GripVertical,{className:"text-light-brown"})}),(0,d.jsx)("div",{className:"flex-1 bg-white rounded-xl shadow-sm border border-light-brown/10 p-2 ml-1",children:(0,d.jsx)(r,{content:E,onChange:F,onSave:ag,onCancel:()=>o&&o(null)})}),(0,d.jsx)("button",{onClick:()=>x(a.id),className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity p-1.5 rounded-full hover:bg-red-100 text-red-500 z-10",title:"Delete",children:(0,d.jsx)(j.Trash2,{size:16})})]});else return(0,d.jsxs)("div",{ref:aa,className:"flex items-start group relative",style:{paddingLeft:0,paddingRight:0,marginTop:a.parent?"18px":"0",marginBottom:"2px"},children:[(0,d.jsx)("div",{...$,..._,className:"ml-2 mt-2 opacity-0 group-hover:opacity-100 cursor-grab transition-opacity",style:{minWidth:20},title:"Drag",children:(0,d.jsx)(j.GripVertical,{className:"text-light-brown"})}),(0,d.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center bg-earth-50 rounded-lg border border-earth-200 p-4 min-h-[120px] cursor-pointer hover:bg-earth-100 transition",onClick:()=>o&&o(a.id),title:"Click to edit image",children:[E&&E.url?(0,d.jsx)("img",{src:E.url,alt:E.alt||"",className:`rounded shadow-sm ${"small"===E.width?"w-[300px]":"medium"===E.width?"w-[500px]":"large"===E.width?"w-[700px]":"full"===E.width?"w-full":"max-w-full h-auto"}`,style:{maxHeight:"220px",objectFit:"cover",display:"block",margin:"0 auto"}}):(0,d.jsx)("span",{className:"text-earth-400 italic w-full text-center block",children:"No image selected"}),E&&E.caption&&(0,d.jsx)("div",{className:"text-xs text-earth-600 mt-2 text-center",children:E.caption})]}),(0,d.jsx)("button",{onClick:()=>x(a.id),className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity p-1.5 rounded-full hover:bg-red-100 text-red-500 z-10",title:"Delete",children:(0,d.jsx)(j.Trash2,{size:16})})]});if("icon"===a.type)if(B)return(0,d.jsxs)("div",{ref:aa,className:"flex items-start group relative",style:{paddingLeft:0,paddingRight:0,marginTop:a.parent?"18px":"0",marginBottom:"2px"},children:[(0,d.jsx)("div",{...$,..._,className:"ml-2 mt-2 opacity-0 group-hover:opacity-100 cursor-grab transition-opacity",style:{minWidth:20},title:"Drag",children:(0,d.jsx)(j.GripVertical,{className:"text-light-brown"})}),(0,d.jsx)("div",{className:"flex-1 bg-white rounded-xl shadow-sm border border-light-brown/10 p-2 ml-1",children:(0,d.jsx)(s,{content:E,onChange:F,onSave:ag,onCancel:()=>o&&o(null)})}),(0,d.jsx)("button",{onClick:()=>x(a.id),className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity p-1.5 rounded-full hover:bg-red-100 text-red-500 z-10",title:"Delete",children:(0,d.jsx)(j.Trash2,{size:16})})]});else{let b=E&&E.icon&&k[E.icon]?k[E.icon]:j.Star;return(0,d.jsxs)("div",{ref:aa,className:`flex items-start group gap-3 bg-earth-50 rounded-lg border border-earth-200 p-4 min-h-[60px] cursor-pointer hover:bg-earth-100 transition ${E?.layout==="vertical"?"flex-col items-start":""}`,style:{paddingLeft:0,paddingRight:0,marginTop:a.parent?"18px":"0",marginBottom:"2px"},onClick:()=>o&&o(a.id),title:"Click to edit icon block",children:[(0,d.jsx)(b,{size:E?.size==="xlarge"?48:E?.size==="large"?32:E?.size==="medium"?24:16,style:{color:E?.color||"#8A6F53"}}),(0,d.jsx)("span",{className:"text-earth-800 text-base",children:E?.text?E.text.split("\n").map((a,b)=>(0,d.jsxs)("span",{children:[a,(0,d.jsx)("br",{})]},b)):(0,d.jsx)("span",{className:"text-earth-400 italic",children:"No text"})})]})}if("banner"===a.type){let b=[{type:"info",icon:j.Info,bgColor:"bg-blue-50",borderColor:"border-blue-200",textColor:"text-blue-800",iconColor:"text-blue-600"},{type:"success",icon:j.CheckCircle,bgColor:"bg-green-50",borderColor:"border-green-200",textColor:"text-green-800",iconColor:"text-green-600"},{type:"warning",icon:j.AlertTriangle,bgColor:"bg-yellow-50",borderColor:"border-yellow-200",textColor:"text-yellow-800",iconColor:"text-yellow-600"},{type:"error",icon:j.AlertCircle,bgColor:"bg-red-50",borderColor:"border-red-200",textColor:"text-red-800",iconColor:"text-red-600"},{type:"neutral",icon:j.Flag,bgColor:"bg-earth-50",borderColor:"border-earth-200",textColor:"text-earth-800",iconColor:"text-earth-600"}],c=b.find(a=>a.type===(E?.type||"info"))||b[0],e=c.icon;return B?(0,d.jsxs)("div",{ref:aa,className:"flex items-start group relative",style:{paddingLeft:0,paddingRight:0,marginTop:a.parent?"18px":"0",marginBottom:"2px"},children:[(0,d.jsx)("div",{...$,..._,className:"ml-2 mt-2 opacity-0 group-hover:opacity-100 cursor-grab transition-opacity",style:{minWidth:20},title:"Drag",children:(0,d.jsx)(j.GripVertical,{className:"text-light-brown"})}),(0,d.jsx)("div",{className:"flex-1 bg-white rounded-xl shadow-sm border border-light-brown/10 p-2 ml-1",children:(0,d.jsx)(t,{content:E,onChange:F,onSave:ag,onCancel:()=>o&&o(null)})}),(0,d.jsx)("button",{onClick:()=>x(a.id),className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity p-1.5 rounded-full hover:bg-red-100 text-red-500 z-10",title:"Delete",children:(0,d.jsx)(j.Trash2,{size:16})})]}):(0,d.jsxs)("div",{ref:aa,className:`flex items-start group ${c.bgColor} ${c.borderColor} rounded-lg border p-4 min-h-[48px] cursor-pointer hover:bg-opacity-80 transition`,style:{paddingLeft:0,paddingRight:0,marginTop:a.parent?"18px":"0",marginBottom:"2px"},onClick:()=>o&&o(a.id),title:"Click to edit banner",children:[E?.showIcon!==!1&&(0,d.jsx)(e,{size:20,className:c.iconColor}),(0,d.jsx)("span",{className:`ml-2 ${c.textColor} font-semibold`,children:E?.text||(0,d.jsx)("span",{className:"text-earth-400 italic",children:"Banner"})})]})}return(0,d.jsxs)("div",{ref:aa,style:ae,className:(0,l.cn)("bg-white bg-opacity-90 rounded-xl shadow-sm mb-4","heading"===a.type&&"border-2 border-light-brown/20","subheading"===a.type&&"border border-light-brown/10",ad&&"opacity-50"),children:[("heading"===a.type||"subheading"===a.type)&&(0,d.jsxs)("div",{className:"p-4 flex items-center justify-between group",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,d.jsx)("div",{...$,..._,className:"opacity-0 group-hover:opacity-100 cursor-grab",children:(0,d.jsx)(j.GripVertical,{className:"text-light-brown/60 hover:text-light-brown"})}),c&&(0,d.jsx)("button",{onClick:()=>D(!C),className:"p-1 hover:bg-light-brown/10 rounded",children:C?(0,d.jsx)(j.ChevronDown,{size:16}):(0,d.jsx)(j.ChevronRight,{size:16})}),z?(0,d.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,d.jsx)("input",{autoFocus:!0,value:G,onChange:a=>H(a.target.value),onBlur:()=>{},onKeyDown:b=>{if("Enter"===b.key){let b=G.trim()||"Untitled";w(a.id,{content:b,headingColor:I,headingBold:K,headingItalic:M,headingUnderline:O,headingFont:R}),F(b),A(!1)}"Escape"===b.key&&A(!1)},className:(0,l.cn)("w-full bg-pale-beige/80 rounded px-2 py-1 outline-none mb-1","heading"===a.type&&"text-2xl font-playfair font-bold","subheading"===a.type&&"text-xl font-medium"),style:{color:I,fontWeight:K?"bold":void 0,fontStyle:M?"italic":void 0,textDecoration:O?"underline":void 0},placeholder:"heading"===a.type?"Enter heading…":"Enter subheading…"}),(0,d.jsx)(function(){let[b,c]=(0,e.useState)(!1),g=f().useRef(null),h="heading"===a.type?"right-0":(a.type,"left-0");return(0,d.jsxs)("div",{className:"relative inline-block heading-style-toolbar",ref:g,children:[(0,d.jsx)("button",{type:"button",className:"p-1 rounded bg-accent/40 hover:bg-accent/60 text-earth-700",onClick:()=>c(a=>!a),title:"Style",children:(0,d.jsx)(j.Palette,{size:18})}),b&&(0,d.jsxs)("div",{className:`absolute top-full mt-2 z-50 bg-pale-beige border border-accent rounded-lg shadow-lg px-3 py-2 flex flex-col gap-2 items-start w-[min(320px,90vw)] max-w-xs min-w-[220px] ${h}`,style:{left:"text"===a.type?0:void 0,right:"heading"===a.type?0:void 0,overflowX:"auto"},children:[(0,d.jsxs)("div",{className:"flex gap-2 items-center flex-wrap",children:[(0,d.jsx)("button",{type:"button",className:(0,l.cn)("p-1 rounded hover:bg-light-brown/20",K&&"bg-light-brown/30"),title:"Bold",onClick:()=>L(a=>!a),children:(0,d.jsx)(j.Bold,{size:16})}),(0,d.jsx)("button",{type:"button",className:(0,l.cn)("p-1 rounded hover:bg-light-brown/20",M&&"bg-light-brown/30"),title:"Italic",onClick:()=>N(a=>!a),children:(0,d.jsx)(j.Italic,{size:16})}),(0,d.jsx)("button",{type:"button",className:(0,l.cn)("p-1 rounded hover:bg-light-brown/20",O&&"bg-light-brown/30"),title:"Underline",onClick:()=>P(a=>!a),children:(0,d.jsx)(j.Underline,{size:16})}),(0,d.jsx)("div",{className:"relative",children:(0,d.jsx)("select",{value:R,onChange:a=>S(a.target.value),className:"rounded px-1 py-0.5 border border-light-brown text-xs",style:{fontFamily:R||void 0,maxWidth:120},title:"Font style",children:Q.map(a=>(0,d.jsx)("option",{value:a.val,style:{fontFamily:a.val||void 0,fontWeight:K?"bold":void 0,fontStyle:M?"italic":void 0,textDecoration:O?"underline":void 0},children:a.label},a.val))})})]}),(0,d.jsxs)("div",{className:"flex flex-wrap gap-2 items-center mt-2",children:[X.map((a,b)=>(0,d.jsx)("button",{type:"button",onClick:()=>J(a),style:{backgroundColor:a,borderColor:a===I?"#8A6F53":"#ddd"},className:(0,l.cn)("w-6 h-6 rounded-full border-2 transition-all",a===I&&"ring-2 ring-accent scale-110","hover:scale-105 hover:ring-2 hover:ring-accent/40"),title:a,children:a===I&&(0,d.jsx)("span",{className:"block w-2 h-2 rounded-full bg-white mx-auto my-auto mt-2"})},a)),(0,d.jsxs)("form",{onSubmit:ah,className:"flex items-center gap-1 ml-2",style:{minWidth:0},children:[(0,d.jsx)("input",{type:"color",value:Y,onChange:a=>Z(a.target.value),className:"w-6 h-6 rounded-full border border-[#ddd] cursor-pointer",style:{padding:0,background:"none"},title:"Add new color"}),(0,d.jsx)("button",{type:"submit",className:"px-1 py-0.5 rounded bg-accent/40 hover:bg-accent/60 text-xs text-earth-700 border border-accent",tabIndex:-1,title:"Add color",children:"+"})]})]}),(0,d.jsx)("div",{className:"w-full mt-2 mb-1 px-1 py-1 rounded bg-white border border-accent text-xs text-earth-700",style:{fontFamily:R||void 0,fontWeight:K?"bold":void 0,fontStyle:M?"italic":void 0,textDecoration:O?"underline":void 0,color:I,minHeight:24},children:G||"Font preview"}),(0,d.jsx)("button",{type:"button",className:"ml-2 px-2 py-1 rounded bg-accent/40 hover:bg-accent/60 text-earth-700 text-xs",onClick:()=>c(!1),tabIndex:-1,children:"Done"})]})]})},{})]}):(0,d.jsxs)("div",{className:(0,l.cn)("flex-1 truncate transition-colors flex items-center","heading"===a.type&&"text-2xl font-playfair font-bold","subheading"===a.type&&"text-xl font-medium","hover:bg-pale-beige/80 rounded px-1 cursor-pointer"),style:{color:I||"#000",fontWeight:K?"bold":void 0,fontStyle:M?"italic":void 0,textDecoration:O?"underline":void 0,fontFamily:(void 0!==R?R:"")||void 0},onClick:()=>{H(u(E)),J(a.headingColor||"#000000"),L(!!a.headingBold),N(!!a.headingItalic),P(!!a.headingUnderline),A(!0)},title:"Click to edit title",children:[u(E)||(0,d.jsx)("span",{className:"italic text-earth-400",children:"heading"===a.type?"Click to add a heading…":"Click to add a subheading…"}),(0,d.jsx)("span",{className:"ml-2 opacity-0 group-hover:opacity-80 transition-opacity",children:(0,d.jsx)(j.Pencil,{size:16})})]})]}),(0,d.jsxs)("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:["heading"===a.type&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("button",{onClick:()=>{if(!a.parent)return;let b=y.find(b=>b.id===a.parent);w(a.id,{parent:b?.parent??null})},disabled:!a.parent,className:"p-1.5 rounded-full hover:bg-light-brown/20 text-light-brown disabled:opacity-30",title:"Outdent",children:(0,d.jsx)(j.Outdent,{size:16})}),(0,d.jsx)("button",{onClick:()=>{let b=af();b&&w(a.id,{parent:b.id})},disabled:!af(),className:"p-1.5 rounded-full hover:bg-light-brown/20 text-light-brown disabled:opacity-30",title:"Indent",children:(0,d.jsx)(j.Indent,{size:16})})]}),"text"!==a.type&&(0,d.jsx)("button",{onClick:()=>v("heading"===a.type?"subheading":"text",a.id),className:"p-1.5 bg-light-brown/10 rounded-full hover:bg-light-brown/20 text-light-brown",title:`Add ${"heading"===a.type?"subheading":"text"}`,children:(0,d.jsx)(j.Plus,{size:16})}),(0,d.jsx)("button",{onClick:()=>x(a.id),className:"p-1.5 rounded-full hover:bg-red-100 text-red-500",title:"Delete",children:(0,d.jsx)(j.Trash2,{size:16})})]})]}),c&&C&&!z&&(0,d.jsx)("div",{className:(0,l.cn)("space-y-2 pb-2","heading"===a.type&&"px-6"),children:c})]})}function w({parentId:a,beforeId:b=null}){let{addSection:c}=(0,m.b)(),[f,g]=(0,e.useState)(!1),[h,i]=(0,e.useState)(!1),k=(0,e.useRef)(null),l=[{type:"text",icon:j.Type,label:"Text",description:"Start writing with plain text"},{type:"heading",icon:j.Heading1,label:"Heading 1",description:"Big section heading"},{type:"subheading",icon:j.Heading2,label:"Heading 2",description:"Medium section heading"},{type:"table",icon:j.Table,label:"Table",description:"Create a data table"},{type:"image",icon:j.Image,label:"Image",description:"Add an image from URL"},{type:"icon",icon:j.Smile,label:"Icon Block",description:"Add an icon with text"},{type:"banner",icon:j.Flag,label:"Banner",description:"Create a colorful banner"}];return(0,d.jsxs)("div",{className:"relative flex items-center h-6 group",onMouseEnter:()=>i(!0),onMouseLeave:()=>{i(!1),f||g(!1)},children:[(0,d.jsx)("button",{className:`absolute left-0 z-10 w-6 h-6 flex items-center justify-center rounded-full bg-white border border-earth-200 shadow-sm transition-all
          ${h||f?"opacity-100 scale-100":"opacity-0 scale-90 pointer-events-none"}
          hover:bg-earth-100 hover:border-accent`,style:{top:"50%",transform:"translateY(-50%)"},onClick:()=>g(a=>!a),tabIndex:0,"aria-label":"Add block",children:(0,d.jsx)(j.Plus,{size:14})}),(0,d.jsx)("div",{className:`w-full h-px bg-earth-100 transition-colors ${h?"bg-accent/30":""}`}),f&&(0,d.jsx)("div",{ref:k,className:"absolute left-8 top-1/2 -translate-y-1/2 bg-white border border-earth-200 rounded-lg shadow-lg py-2 z-20 min-w-[240px] animate-fade-in",children:l.map(({type:e,icon:f,label:h,description:i})=>(0,d.jsxs)("button",{onClick:()=>{c(e,a,b),g(!1)},className:"w-full px-4 py-3 flex items-center gap-3 hover:bg-earth-50 transition-colors text-left",children:[(0,d.jsx)("div",{className:"w-8 h-8 rounded bg-earth-100 flex items-center justify-center",children:(0,d.jsx)(f,{size:16,className:"text-earth-600"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"font-medium text-earth-800",children:h}),(0,d.jsx)("div",{className:"text-sm text-earth-500",children:i})]})]},e))})]})}var x=c(5515),y=c.n(x),z=c(1662),A=c.n(z);function B({section:a,getChildSections:b,level:c=1,parentType:e=null,isFirst:f=!1}){var g;if(!a)return null;let h=b(a.id),i="div",j={},k={marginBottom:22,marginTop:18*!f,paddingLeft:0,paddingTop:2,paddingBottom:2,width:"100%",boxSizing:"border-box",position:"relative"};if("subheading"===a.type)return(0,d.jsxs)("div",{style:{background:"#fff",border:"1.5px solid #e8ded4",borderRadius:16,padding:"16px 20px",marginBottom:22,marginTop:18*!f,width:"100%",boxSizing:"border-box",position:"relative"},children:[(0,d.jsx)("h2",{style:{fontFamily:"Inter, sans-serif",fontWeight:700,fontSize:"1.25rem",margin:0,marginBottom:8,color:a.headingColor||"#bfae9b",textDecoration:a.headingUnderline?"underline":void 0,fontStyle:a.headingItalic?"italic":void 0,letterSpacing:"-0.5px",textAlign:"left",lineHeight:1.3},children:a.content}),h&&h.length>0&&(0,d.jsx)("div",{style:{marginTop:0},children:h.map((e,f)=>(0,d.jsx)(B,{section:e,getChildSections:b,level:c+1,parentType:a.type,isFirst:0===f},e.id))})]});if("table"===a.type&&a.content&&a.content.rows){let b=a.content.rows,c=a.content.hasHeader;return(0,d.jsx)("div",{style:{background:"#fff",border:"1.5px solid #e8ded4",borderRadius:16,padding:"16px 20px",marginBottom:22,marginTop:18*!f,width:"100%",boxSizing:"border-box",position:"relative"},children:(0,d.jsxs)("table",{style:{borderCollapse:"collapse",width:"100%",margin:"0",fontSize:15},children:[(0,d.jsx)("thead",{children:(0,d.jsx)("tr",{children:b[0].map((a,b)=>(0,d.jsx)("th",{style:{border:"1px solid #e8ded4",padding:"6px 10px",background:c?"#f7ede2":"#fff",fontWeight:600,position:"relative"},children:a},b))})}),(0,d.jsx)("tbody",{children:b.slice(1).map((a,b)=>(0,d.jsx)("tr",{children:a.map((a,b)=>(0,d.jsx)("td",{style:{border:"1px solid #e8ded4",padding:"6px 10px",background:"#fff",fontWeight:400},children:a},b))},b))})]})})}return"text"===a.type&&(i="div",j={style:{fontFamily:"Inter, sans-serif",fontSize:"1.05rem",marginBottom:"0.5em",color:"#2d1c0f",lineHeight:1.7},dangerouslySetInnerHTML:{__html:a.content||""}},"heading"===e?(k.background="#fff",k.border="1.5px solid #e8ded4",k.borderRadius=12,k.padding="12px 16px 8px 16px",k.marginBottom=10,k.boxShadow="0 1px 4px 0 rgba(92,67,46,0.02)"):(k.background="none",k.border="none",k.borderRadius=0,k.padding=0,k.marginBottom=10,k.boxShadow="none"),k.width="100%",k.boxSizing="border-box"),"image"===a.type&&a.content&&a.content.url&&(i="figure",j={style:{textAlign:a.content.alignment||"center",margin:0}},k.background="none",k.border="none",k.boxShadow="none",k.padding=0,k.marginBottom=18),"icon"===a.type&&a.content&&(i="div",j={style:{display:"flex",alignItems:"center",gap:8,fontSize:18,color:a.content.color||"#3B82F6",fontWeight:500}},k.background="none",k.border="none",k.boxShadow="none",k.padding=0,k.marginBottom=12),"banner"===a.type&&a.content&&(i="div",j={style:{background:a.content.color||("info"===a.content.type?"#e0f7fa":"warning"===a.content.type?"#fff3cd":"success"===a.content.type?"#d1f7c4":"danger"===a.content.type?"#ffe0e0":"#e6e6e6"),color:a.content.textColor||"#333",borderRadius:8,padding:"12px 20px",display:"flex",alignItems:"center",gap:10,fontWeight:500,border:"1.5px solid #e8ded4"}},k.background="none",k.border="none",k.boxShadow="none",k.padding=0,k.marginBottom=14),(0,d.jsxs)("div",{style:k,children:["image"===a.type&&a.content&&a.content.url?(0,d.jsxs)("figure",{style:{textAlign:a.content.alignment||"center",margin:0},children:[(0,d.jsx)("img",{src:a.content.url,alt:a.content.alt||"",style:{maxWidth:"100%",width:a.content.width||"auto",borderRadius:8,margin:"0 auto"}}),a.content.caption&&(0,d.jsx)("figcaption",{style:{fontSize:13,color:"#8A6F53",marginTop:4},children:a.content.caption})]}):"icon"===a.type&&a.content?(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,fontSize:18,color:a.content.color||"#3B82F6",fontWeight:500},children:[(0,d.jsx)("span",{style:{fontSize:28,marginRight:6},children:(g=a.content.icon)&&({Star:"★",Smile:"\uD83D\uDE0A",Flag:"⚑",CheckSquare:"☑️",Image:"\uD83D\uDDBC️",Table:"\uD83D\uDCCA",Type:"✏️",Heading1:"\uD83D\uDD20",Heading2:"\uD83D\uDD21",Code:"\uD83D\uDCBB",Quote:"❝"})[g]||"★"}),(0,d.jsx)("span",{children:a.content.text})]}):"banner"===a.type&&a.content?(0,d.jsxs)("div",{style:j.style,children:[a.content.showIcon&&(0,d.jsx)("span",{style:{fontSize:22,marginRight:8},children:"⚑"}),(0,d.jsx)("span",{children:a.content.text})]}):"table"===a.type&&a.content&&a.content.rows?(0,d.jsx)("table",{style:{borderCollapse:"collapse",width:"100%",margin:"10px 0",fontSize:15},children:(0,d.jsx)("tbody",{children:a.content.rows.map((b,c)=>(0,d.jsx)("tr",{children:b.map((b,e)=>(0,d.jsx)("td",{style:{border:"1px solid #e8ded4",padding:"6px 10px",background:0===c&&a.content.hasHeader?"#f7ede2":"#fff",fontWeight:0===c&&a.content.hasHeader?600:400},children:b},e))},c))})}):["heading","subheading","text"].includes(a.type)?(0,d.jsx)(i,{...j,children:"text"===a.type?null:a.content}):null,h&&h.length>0&&(0,d.jsx)("div",{style:{marginTop:0},children:h.map((e,f)=>(0,d.jsx)(B,{section:e,getChildSections:b,level:c+1,parentType:a.type,isFirst:0===f},e.id))})]})}function C({rootId:a,style:b={}}){let{sections:c,getChildSections:e}=(0,m.b)(),f=c.find(b=>b.id===a);return f?(0,d.jsx)("div",{className:"bg-white p-8 max-w-4xl mx-auto",style:{fontFamily:'"Inter", sans-serif',lineHeight:"1.6",color:"#4A3B2F",...b},children:(0,d.jsx)(B,{section:f,getChildSections:e})}):null}function D({open:a,onClose:b,onExport:c,previewContent:f,defaultOptions:g={}}){let[h,i]=(0,e.useState)({includeBookmarks:!0,pageSize:"A4",orientation:"portrait",...g}),[k,l]=(0,e.useState)(!1);if(!a)return null;let m=()=>{c(h)};return(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-earth-200",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-earth-800",children:"Export as PDF"}),(0,d.jsx)("button",{onClick:b,className:"p-2 hover:bg-earth-100 rounded-full transition-colors",children:(0,d.jsx)(j.X,{size:20,className:"text-earth-600"})})]}),(0,d.jsx)("div",{className:"p-6",children:k?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"mb-4",children:(0,d.jsx)("button",{onClick:()=>l(!1),className:"text-accent hover:text-accent/80 text-sm",children:"← Back to options"})}),(0,d.jsx)("div",{className:"border border-earth-200 rounded-lg overflow-hidden max-h-96 overflow-y-auto",children:f}),(0,d.jsxs)("div",{className:"flex gap-3 justify-end mt-4",children:[(0,d.jsx)("button",{onClick:b,className:"px-4 py-2 text-earth-600 hover:bg-earth-100 rounded-md transition-colors",children:"Cancel"}),(0,d.jsxs)("button",{onClick:m,className:"px-4 py-2 bg-accent text-white rounded-md hover:bg-accent/90 transition-colors flex items-center gap-2",children:[(0,d.jsx)(j.Download,{size:16}),"Export PDF"]})]})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-earth-700 mb-2",children:"Page Size"}),(0,d.jsxs)("select",{value:h.pageSize,onChange:a=>i(b=>({...b,pageSize:a.target.value})),className:"w-full p-2 border border-earth-300 rounded-md focus:ring-2 focus:ring-accent focus:border-accent",children:[(0,d.jsx)("option",{value:"A4",children:"A4"}),(0,d.jsx)("option",{value:"Letter",children:"Letter"}),(0,d.jsx)("option",{value:"Legal",children:"Legal"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-earth-700 mb-2",children:"Orientation"}),(0,d.jsxs)("select",{value:h.orientation,onChange:a=>i(b=>({...b,orientation:a.target.value})),className:"w-full p-2 border border-earth-300 rounded-md focus:ring-2 focus:ring-accent focus:border-accent",children:[(0,d.jsx)("option",{value:"portrait",children:"Portrait"}),(0,d.jsx)("option",{value:"landscape",children:"Landscape"})]})]}),(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("input",{type:"checkbox",id:"includeBookmarks",checked:h.includeBookmarks,onChange:a=>i(b=>({...b,includeBookmarks:a.target.checked})),className:"rounded border-earth-300 text-accent focus:ring-accent"}),(0,d.jsx)("label",{htmlFor:"includeBookmarks",className:"ml-2 text-sm text-earth-700",children:"Include bookmarks for navigation"})]})]}),(0,d.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,d.jsxs)("button",{onClick:()=>l(!0),className:"px-4 py-2 text-earth-600 hover:bg-earth-100 rounded-md transition-colors flex items-center gap-2",children:[(0,d.jsx)(j.Eye,{size:16}),"Preview"]}),(0,d.jsx)("button",{onClick:b,className:"px-4 py-2 text-earth-600 hover:bg-earth-100 rounded-md transition-colors",children:"Cancel"}),(0,d.jsxs)("button",{onClick:m,className:"px-4 py-2 bg-accent text-white rounded-md hover:bg-accent/90 transition-colors flex items-center gap-2",children:[(0,d.jsx)(j.Download,{size:16}),"Export PDF"]})]})]})})]})})}function E(){let{sections:a,activeSection:b,updateSection:c,reorderSections:i,getChildSections:j,setActiveSection:k}=(0,m.b)(),[l,n]=f().useState(null),o=(0,g.useSensors)((0,g.useSensor)(g.PointerSensor,{activationConstraint:{distance:8}})),[p,q]=f().useState(null),r=a.find(a=>a.id===b)||{},s="text"===r.type?r.id:b,t=a.find(a=>a.id===s),u=f().useRef();async function x(b){if(!u.current)return;let c=await A()(u.current,{backgroundColor:"#F1EEEB",scale:2,useCORS:!0}),d=c.toDataURL("image/png"),e=new(y())({orientation:"portrait",unit:"pt",format:"a4"}),f=e.internal.pageSize.getWidth(),g=e.internal.pageSize.getHeight(),h={width:c.width,height:c.height},i=Math.min(f/h.width,g/h.height),k=h.width*i,l=h.height*i;e.addImage(d,"PNG",(f-k)/2,40,k,l),t&&e.outline&&"function"==typeof e.outline.add&&Array.isArray(e.outline)&&!function a(b,c){for(let d of b){let b=e.outline.add(d.title,{pageNumber:1},c);d.children&&d.children.length>0&&a(d.children,b)}}(function a(b,c,d,e=0){let f=b.find(a=>a.id===d);if(!f)return[];let g=[];return("heading"===f.type||"subheading"===f.type)&&g.push({title:f.content||"Untitled",level:e,id:f.id,children:a(b,c,f.id,e+1)}),g.push(...a(b,c,f.id,e+1)),g}(a,j,t.id,0),null),e.save("proibe-notes.pdf")}let[z,B]=(0,e.useState)(!1);return(0,d.jsxs)("div",{className:"flex-1 flex flex-col bg-gradient-to-br from-soft-peach to-pale-beige overflow-hidden",children:[(0,d.jsx)("div",{className:"flex items-center justify-end px-4 pt-4 gap-2",children:(0,d.jsx)("button",{onClick:()=>B(!0),className:"px-4 py-2 bg-accent text-white rounded shadow hover:bg-accent/80 transition",children:"Export as PDF"})}),(0,d.jsx)(D,{open:z,onClose:()=>B(!1),onExport:a=>{B(!1),x(a)},previewContent:(0,d.jsx)(C,{rootId:t?.id,style:{boxShadow:"none",border:"none",margin:0,background:"transparent"}}),defaultOptions:{}}),(0,d.jsxs)("div",{className:"flex-1 overflow-y-auto px-4 py-6",children:[(0,d.jsx)("div",{style:{position:"absolute",left:"-200vw",top:0,width:"900px",minHeight:"100px",pointerEvents:"none",zIndex:-1,opacity:1},children:(0,d.jsx)("div",{ref:u,id:"pdf-print-view",children:t&&(0,d.jsx)(C,{rootId:t.id})})}),t?(0,d.jsxs)(g.DndContext,{sensors:o,collisionDetection:function(b){let c=a.find(a=>a.id===l);return c?.type!=="heading"?(0,g.closestCorners)(b):(0,g.rectIntersection)(b)},onDragStart:function({active:a}){n(a.id)},onDragEnd:function({active:b,over:d}){if(n(null),!b?.id||!d?.id)return;let e=a.find(a=>a.id===b.id),f=a.find(a=>a.id===d.id);if(e&&f){if("heading"===f.type&&["subheading","text","table","image","icon","banner"].includes(e.type)||"subheading"===f.type&&["text","table","image","icon","banner"].includes(e.type))return void c(e.id,{parent:f.id});if(e.parent===f.parent){e.id!==f.id&&i(e.id,f.id);return}c(e.id,{parent:f.parent}),i(e.id,f.id)}},children:[(0,d.jsx)(h.SortableContext,{items:j(t.id).map(a=>a.id),strategy:h.verticalListSortingStrategy,children:function b(e,g=null){let i=a.find(a=>a.id===e);if(!i)return null;if(["text","table","image","icon","banner"].includes(i.type))return(0,d.jsx)(v,{section:i,onSave:(b,d)=>{c(b,{content:d});let e=a.find(a=>a.id===i.parent);k(e?e.id:i.id),q(null)},isEditing:p===i.id,onEdit:a=>q(a)},i.id);let l=j(i.id);return(0,d.jsx)(v,{section:i,onSave:(a,b)=>{c(a,{content:b})},children:(0,d.jsxs)(h.SortableContext,{items:l.map(a=>a.id),strategy:h.verticalListSortingStrategy,children:[0===l.length&&(0,d.jsx)(w,{parentId:i.id}),l.map((a,c)=>(0,d.jsxs)(f().Fragment,{children:[(0,d.jsx)(w,{parentId:i.id,beforeId:a.id}),b(a.id,i.type),c===l.length-1&&(0,d.jsx)(w,{parentId:i.id})]},a.id))]})},i.id)}(t.id)}),(0,d.jsx)(g.DragOverlay,{children:l&&(0,d.jsx)(v,{section:a.find(a=>a.id===l),onSave:()=>{},isDraggingOverlay:!0})})]}):(0,d.jsx)("p",{className:"text-earth-700 italic",children:"Select a heading or subheading to begin editing…"})]})]})}},6259:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>l});var e=c(8732),f=c(2015),g=c(37),h=c(3220),i=c(9918),j=c.n(i),k=a([h]);h=(k.then?(await k)():k)[0];let m={hidden:{},show:{transition:{staggerChildren:.1,delayChildren:.3}}},n={hidden:{opacity:0,y:-10},show:{opacity:1,y:0,transition:{type:"spring",stiffness:120,damping:20}}};function l({headerBg:a,setHeaderBg:b}){let c=(0,f.useRef)();return(0,e.jsxs)("header",{className:"relative overflow-hidden bg-earth-200 border-b border-accent/40 min-h-[180px] flex items-end group",style:a?{backgroundImage:`url(${a})`,backgroundSize:"cover",backgroundPosition:"center"}:{},children:[a&&(0,e.jsx)("div",{className:"absolute inset-0 bg-black/30 pointer-events-none"}),(0,e.jsx)("div",{className:"absolute -top-32 -right-32 w-72 h-72 bg-accent rounded-full opacity-30 blur-3xl animate-pulse z-10"}),(0,e.jsxs)("div",{className:"absolute top-3 right-4 z-30 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,e.jsxs)("button",{className:"flex items-center gap-1 px-3 py-1.5 bg-white/80 hover:bg-white/90 rounded shadow text-earth-700 text-xs font-medium",onClick:()=>c.current&&c.current.click(),title:a?"Change banner image":"Add banner image",children:[(0,e.jsx)(g.Image,{size:16}),a?"Change Banner":"Add Banner"]}),a&&(0,e.jsx)("button",{className:"flex items-center px-2 py-1 bg-red-100 hover:bg-red-200 rounded text-red-600 text-xs",onClick:function(){b(null)},title:"Remove banner image",children:(0,e.jsx)(g.X,{size:14})}),(0,e.jsx)("input",{ref:c,type:"file",accept:"image/*",className:"hidden",onChange:function(a){let c=a.target.files[0];if(!c)return;let d=new FileReader;d.onload=a=>{b(a.target.result)},d.readAsDataURL(c)}})]}),(0,e.jsxs)(h.motion.div,{className:"relative z-20 flex items-center justify-between px-10 py-6 w-full",variants:m,initial:"hidden",animate:"show",children:[(0,e.jsx)(h.motion.div,{variants:n,className:"flex items-center space-x-3",children:(0,e.jsx)(j(),{href:"/landing",legacyBehavior:!0,children:(0,e.jsxs)("a",{className:"flex items-center gap-2 group hover:opacity-80 transition",children:[(0,e.jsx)(g.BookOpen,{size:28,className:"text-earth-700 drop-shadow group-hover:text-accent transition"}),(0,e.jsx)("h1",{className:"text-3xl font-playfair font-bold text-earth-100 drop-shadow-lg group-hover:text-accent transition",children:"Proibe"})]})})}),(0,e.jsxs)(h.motion.div,{variants:n,className:"relative inline-block",children:[(0,e.jsx)("p",{className:"text-sm italic text-earth-100 drop-shadow",children:"Beautiful note-taking made simple"}),(0,e.jsx)(h.motion.span,{className:"absolute left-0 bottom-0 h-[2px] bg-earth-100",initial:{width:0},animate:{width:"100%"},transition:{delay:.6,duration:.8,ease:"easeInOut"}})]})]})]})}d()}catch(a){d(a)}})},6286:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{default:()=>k});var e=c(8732),f=c(2015),g=c(6450),h=c(552),i=c(6259),j=a([g,i]);function k(){let[a,b]=(0,f.useState)(null);return(0,e.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,e.jsx)(i.A,{headerBg:a,setHeaderBg:b}),(0,e.jsxs)("main",{className:"flex flex-1 overflow-hidden",children:[(0,e.jsx)(g.A,{}),(0,e.jsx)("div",{className:"flex-1 flex flex-col items-stretch justify-start px-0 py-0",children:(0,e.jsx)("div",{className:"w-full h-full flex flex-col",children:(0,e.jsx)(h.A,{})})})]})]})}[g,i]=j.then?(await j)():j,d()}catch(a){d(a)}})},6450:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>p});var e=c(8732),f=c(2015),g=c.n(f),h=c(37),i=c(1851),j=c(6016),k=c(3220),l=c(7849),m=c(452),n=a([k]);function o(){return(0,e.jsxs)("div",{className:"text-center p-4 text-earth-700",children:[(0,e.jsx)(h.Plus,{className:"mx-auto mb-2 h-8 w-8"}),(0,e.jsx)("p",{className:"text-sm",children:"Add your first section"})]})}function p(){let{sections:a,activeSection:b,setActiveSection:c,toggleCollapse:d,getChildSections:f,togglePin:n,updateSection:p}=(0,l.b)(),q=g().useCallback((0,l.b)().addSection,[]),r=g().useCallback((0,l.b)().deleteSection,[]),s=g().useCallback((0,l.b)().reorderSections,[]),t=a.filter(a=>a.pinned),u=f(null).filter(a=>!a.pinned),[v,w]=g().useState(null),[x,y]=g().useState(""),[z,A]=g().useState([]),B=(0,i.useSensors)((0,i.useSensor)(i.PointerSensor,{activationConstraint:{distance:8}}));function C(a){return"heading"===a?["subheading","text","table","image","icon","banner"]:"subheading"===a?["text","table","image","icon","banner"]:[]}function D(b){let{active:c,over:e}=b;if(!c?.id||!e?.id)return;let f=a.find(a=>a.id===c.id),g=a.find(a=>a.id===e.id);f&&g&&("heading"===g.type&&["subheading","text"].includes(f.type)?p(f.id,{parent:g.id}):f.parent===g.parent?f.id!==g.id&&s(f.id,g.id):(p(f.id,{parent:g.parent}),s(f.id,g.id)),Array.from(new Set(z)).forEach(d),A([]))}function E(b){let{active:c}=b;if(!c?.id)return;let e=a.find(a=>a.id===c.id);if(!e)return;let f=e.parent;if(!f)return;let g=a.find(a=>a.id===f);g&&g.collapsed&&(d(f),A(a=>[...a,f]))}function F(a){let b=x.trim();p(a,{content:b||"Untitled"}),w(null)}function G({id:a,children:b}){let{attributes:c,listeners:d,setNodeRef:f,transform:g,transition:h,isDragging:i}=(0,j.useSortable)({id:a}),k={transform:g&&CSS.Translate&&"function"==typeof CSS.Translate.toString?CSS.Translate.toString(g):void 0,transition:h,opacity:i?.6:1};return(0,e.jsx)("div",{ref:f,style:k,className:i?"shadow-lg":"",...c,...d,children:b})}let H=(a,g=0,l=!1)=>{if(!l&&0===g&&a.pinned)return null;let o=f(a.id),p=o.length>0;return(0,e.jsxs)(k.motion.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},transition:{duration:.15},children:[(0,e.jsxs)("div",{className:(0,m.cn)(`flex w-full items-center group
          py-2 px-4
          ${p&&!a.collapsed?"rounded-t-md rounded-b-none mb-0":"rounded-md mb-2"}
          cursor-pointer bg-white shadow-sm transition-all duration-150`,b===a.id?"bg-[#F9F7F5] ring-2 ring-accent/40":"hover:bg-[#FCFAF9] text-earth-700"),onClick:()=>c(a.id),children:[(0,e.jsx)(h.GripVertical,{size:14,className:"text-earth-700 opacity-0 group-hover:opacity-100 transition-opacity mr-1 cursor-grab"}),p&&(0,e.jsx)("button",{className:"p-1 mr-1 hover:bg-earth-200 rounded",onClick:b=>{b.stopPropagation(),d(a.id)},children:a.collapsed?(0,e.jsx)(h.ChevronRight,{size:14}):(0,e.jsx)(h.ChevronDown,{size:14})}),(0,e.jsx)("div",{onDoubleClick:b=>{b.stopPropagation(),w(a.id),y(a.content)},children:(a=>{switch(a){case"heading":return(0,e.jsx)(h.Heading1,{className:"h-4 w-4 text-earth-700"});case"subheading":return(0,e.jsx)(h.Heading2,{className:"h-4 w-4 text-earth-700"});case"text":return(0,e.jsx)(h.AlignLeft,{className:"h-4 w-4 text-earth-700"});case"table":return(0,e.jsx)(h.Table,{className:"h-4 w-4 text-earth-700"});case"image":return(0,e.jsx)(h.Image,{className:"h-4 w-4 text-earth-700"});case"icon":return(0,e.jsx)(h.Smile,{className:"h-4 w-4 text-earth-700"});case"banner":return(0,e.jsx)(h.Flag,{className:"h-4 w-4 text-earth-700"});default:return null}})(a.type)}),v===a.id&&("heading"===a.type||"subheading"===a.type)?(0,e.jsx)("input",{autoFocus:!0,spellCheck:!1,value:x,onChange:a=>y(a.target.value),onBlur:()=>F(a.id),onKeyDown:b=>{"Enter"===b.key&&(b.preventDefault(),b.stopPropagation(),F(a.id)),"Escape"===b.key&&(["Enter","Escape"].includes(b.key)&&b.stopPropagation(),w(null))},className:(0,m.cn)("ml-3 flex-1 bg-transparent focus:outline-none",0===g?"text-[15px] font-medium":1===g?"text-[14px]":"text-[13px]")}):(0,e.jsx)("span",{onDoubleClick:b=>{("heading"===a.type||"subheading"===a.type)&&(b.stopPropagation(),w(a.id),y(a.content))},className:(0,m.cn)("ml-2 truncate flex-1",0===g?"text-[15px] font-medium":1===g?"text-[14px]":"text-[13px]"),children:function(a,b){if(!a)return"";if("string"==typeof a)return a.replace(/<[^>]+>/g,"").trim();switch(b){case"table":return"Table";case"image":return"Image";case"icon":return"Icon";case"banner":return"Banner";default:return""}}(a.content,a.type)||`New ${a.type}`}),v!==a.id&&(0,e.jsxs)("div",{className:"ml-auto hidden group-hover:flex items-center gap-2 pointer-events-none",children:[(0,e.jsx)("button",{onClick:b=>{b.stopPropagation(),n(a.id)},className:"p-1 rounded hover:bg-peach-50 pointer-events-auto",children:(0,e.jsx)(h.Star,{size:18,className:a.pinned?"text-accent":"text-[#8A6F53]",fill:a.pinned?"currentColor":"none"})}),C(a.type).includes("subheading")&&(0,e.jsx)("button",{onClick:b=>{b.stopPropagation(),a.collapsed&&d(a.id),q("subheading",a.id)},className:"p-1 rounded bg-accent/40 hover:bg-accent/60 pointer-events-auto",title:"Add subheading",children:(0,e.jsx)(h.Heading2,{size:14})}),C(a.type).includes("text")&&(0,e.jsx)("button",{onClick:b=>{b.stopPropagation(),a.collapsed&&d(a.id),q("text",a.id)},className:"p-1 rounded bg-accent/40 hover:bg-accent/60 pointer-events-auto",title:"Add text",children:(0,e.jsx)(h.AlignLeft,{size:14})}),(0,e.jsx)("button",{onClick:b=>{b.stopPropagation(),r(a.id)},className:"p-1 rounded hover:bg-peach-50 pointer-events-auto",title:"Delete",children:(0,e.jsx)(h.Trash2,{size:18})})]})]}),p&&!a.collapsed&&v!==a.id&&(0,e.jsxs)("div",{className:"relative w-full mb-2 bg-white rounded-b-md shadow-sm",children:[(0,e.jsx)("span",{className:"absolute left-6 top-4 bottom-4 w-px bg-[#D6C4B3]"}),(0,e.jsx)("div",{className:"pl-10 pr-4 py-4 space-y-2",children:(0,e.jsx)(i.DndContext,{sensors:B,collisionDetection:i.rectIntersection,onDragStart:E,onDragEnd:D,children:(0,e.jsx)(j.SortableContext,{items:o.map(a=>a.id),strategy:j.verticalListSortingStrategy,children:o.map(a=>(0,e.jsx)(G,{id:a.id,children:H(a,g+1)},a.id))})})})]})]},a.id)};return(0,e.jsxs)("div",{className:"sm:w-[280px] md:w-[320px] lg:w-[360px] flex-shrink-0 bg-[#F7EDE2] px-4 py-6 overflow-y-auto sidebar-scroll border-r border-[#E8DFD6]",children:[(0,e.jsxs)("div",{className:"flex justify-between items-center mb-5",children:[(0,e.jsx)("h2",{className:"text-[22px] font-serif font-semibold text-earth-700 mb-3",children:"Sections"}),(0,e.jsxs)("div",{className:"flex gap-2 mt-1",children:[(0,e.jsx)(k.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-8 h-8 rounded-md bg-accent/40 hover:bg-accent/60 inline-flex items-center justify-center shadow-sm transition duration-150",onClick:()=>q("heading"),title:"Add heading",children:(0,e.jsx)(h.Heading1,{size:14})}),(0,e.jsx)(k.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-8 h-8 rounded-md bg-accent/40 hover:bg-accent/60 inline-flex items-center justify-center shadow-sm transition duration-150",onClick:()=>{let c=b?a.find(a=>a.id===b):null;c?.type==="heading"?(c.collapsed&&d(c.id),q("subheading",c.id)):q("subheading")},title:"Add subheading",children:(0,e.jsx)(h.Heading2,{size:14})}),(0,e.jsx)(k.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-8 h-8 rounded-md bg-accent/40 hover:bg-accent/60 inline-flex items-center justify-center shadow-sm transition duration-150",onClick:()=>{let c=b?a.find(a=>a.id===b):null;c&&("heading"===c.type||"subheading"===c.type)?(c.collapsed&&d(c.id),q("text",c.id)):q("text")},title:"Add text",children:(0,e.jsx)(h.AlignLeft,{size:14})})]})]}),t.length>0&&(0,e.jsxs)("div",{className:"mb-6",children:[(0,e.jsxs)("h3",{className:"flex items-center text-[17px] font-serif font-medium mb-4 text-earth-700",children:[(0,e.jsx)(h.Pin,{size:16,className:"mr-2 text-light-brown"}),"Pinned"]}),t.map(a=>(0,e.jsxs)(G,{id:a.id,children:[H(a,0,!0),"   "]},a.id)),(0,e.jsx)("hr",{className:"mt-6 border-t border-[#EADFD4]"})]}),(0,e.jsxs)(i.DndContext,{sensors:B,collisionDetection:i.rectIntersection,onDragStart:E,onDragEnd:D,children:[(0,e.jsx)(j.SortableContext,{items:u.map(a=>a.id),strategy:j.verticalListSortingStrategy,children:u.map(a=>(0,e.jsx)(G,{id:a.id,children:H(a,0)},a.id))}),0===u.length&&(0,e.jsx)(o,{})]})]})}k=(n.then?(await n)():n)[0],d()}catch(a){d(a)}})}};