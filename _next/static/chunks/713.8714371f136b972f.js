"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[713],{97713:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ew});var r=n(37876),i=n(14232),a=n(65104),l=n(49072),o=n(20605),s=n(55969),d=n(66576),c=n(18465),x=n(19544),u=n(61334),p=n(96108),h=n(30822),g=n(26124),m=n(12089),b=n(55907),f=n(14305),v=n(14664),y=n(54287),j=n(23355),w=n(17710);function N(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}function C(){return(0,r.jsxs)("div",{className:"text-center p-4 text-earth-700",children:[(0,r.jsx)(a.A,{className:"mx-auto mb-2 h-8 w-8"}),(0,r.jsx)("p",{className:"text-sm",children:"Add your first section"})]})}function k(){let{sections:e,activeSection:t,setActiveSection:n,toggleCollapse:a,getChildSections:k,togglePin:A,updateSection:S}=(0,w.b)(),z=i.useCallback((0,w.b)().addSection,[]),D=i.useCallback((0,w.b)().deleteSection,[]),B=i.useCallback((0,w.b)().reorderSections,[]),E=e.filter(e=>e.pinned),F=k(null).filter(e=>!e.pinned),[I,L]=i.useState(null),[R,T]=i.useState(""),[H,P]=i.useState([]),W=(0,v.FR)((0,v.MS)(v.AN,{activationConstraint:{distance:8}}));function M(e){return"heading"===e?["subheading","text","table","image","icon","banner"]:"subheading"===e?["text","table","image","icon","banner"]:[]}function U(t){let{active:n,over:r}=t;if(!(null==n?void 0:n.id)||!(null==r?void 0:r.id))return;let i=e.find(e=>e.id===n.id),l=e.find(e=>e.id===r.id);i&&l&&("heading"===l.type&&["subheading","text"].includes(i.type)?S(i.id,{parent:l.id}):i.parent===l.parent?i.id!==l.id&&B(i.id,l.id):(S(i.id,{parent:l.parent}),B(i.id,l.id)),Array.from(new Set(H)).forEach(a),P([]))}function _(t){let{active:n}=t;if(!(null==n?void 0:n.id))return;let r=e.find(e=>e.id===n.id);if(!r)return;let i=r.parent;if(!i)return;let l=e.find(e=>e.id===i);l&&l.collapsed&&(a(i),P(e=>[...e,i]))}function O(e){S(e,{content:R.trim()||"Untitled"}),L(null)}function G(e){let{id:t,children:n}=e,{attributes:i,listeners:a,setNodeRef:l,transform:o,transition:s,isDragging:d}=(0,y.gl)({id:t}),c={transform:o&&CSS.Translate&&"function"==typeof CSS.Translate.toString?CSS.Translate.toString(o):void 0,transition:s,opacity:d?.6:1};return(0,r.jsx)("div",{ref:l,style:c,className:d?"shadow-lg":"",...i,...a,children:n})}function K(t){let n=e.find(e=>e.id===t);return n?e.filter(e=>e.parent===n.parent):[]}i.useEffect(()=>{var r;let i,l=(r=function(r){var i,l;let o=document.activeElement.tagName;if("INPUT"===o||"TEXTAREA"===o)return;let s=r.metaKey||r.ctrlKey,d=r.altKey,c=r.shiftKey;if(s&&!c&&!d&&"h"===r.key.toLowerCase())return z("heading"),r.preventDefault();if(s&&c&&!d&&"h"===r.key.toLowerCase()){let n=t?e.find(e=>e.id===t):null;return(null==n?void 0:n.type)==="heading"&&n.collapsed&&a(n.id),z("subheading",(null==n?void 0:n.type)==="heading"?n.id:null),r.preventDefault()}if(s&&!c&&!d&&"t"===r.key.toLowerCase()){let n=t?e.find(e=>e.id===t):null;return(null==n?void 0:n.collapsed)&&a(n.id),z("text",null!=(i=null==n?void 0:n.id)?i:null),r.preventDefault()}if(!s&&!c&&!d&&"Enter"===r.key&&!I){L(t);let n=e.find(e=>e.id===t);T(null!=(l=null==n?void 0:n.content)?l:"");return}if(s&&!d&&("Backspace"===r.key||"Delete"===r.key))return D(t),r.preventDefault();if(s&&d&&("ArrowUp"===r.key||"ArrowDown"===r.key))return function(e){let n=K(t),r=n.findIndex(e=>e.id===t),i="up"===e?n[r-1]:n[r+1];i&&B(t,i.id)}("ArrowUp"===r.key?"up":"down"),r.preventDefault();if(!s&&d&&"ArrowLeft"===r.key)return a(t),r.preventDefault();if(!s&&d&&"ArrowRight"===r.key){let n=e.find(e=>e.id===t);return(null==n?void 0:n.collapsed)&&a(t),r.preventDefault()}if(!s&&!d&&("ArrowUp"===r.key||"ArrowDown"===r.key)){let i=e.findIndex(e=>e.id===t),a=e[i+("ArrowDown"===r.key?1:-1)];return a&&n(a.id),r.preventDefault()}if(s&&!c&&"Enter"===r.key){let n=e.find(e=>e.id===t);if(!n)return;return function(n){let r=e.find(e=>e.id===t);if(!r)return;z(n,r.parent);let i=K(t);B(i[i.length-1].id,t)}(n.type),r.preventDefault()}},function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];clearTimeout(i),i=setTimeout(()=>r(...t),200)});return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[e,t,I,z,D,B,a,n,L,S]);let q=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,b=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!b&&0===i&&e.pinned)return null;let w=k(e.id),C=w.length>0;return(0,r.jsxs)(j.P.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},transition:{duration:.15},children:[(0,r.jsxs)("div",{className:N("flex w-full items-center group\n          py-2 px-4\n          ".concat(C&&!e.collapsed?"rounded-t-md rounded-b-none mb-0":"rounded-md mb-2","\n          cursor-pointer bg-white shadow-sm transition-all duration-150"),t===e.id?"bg-[#F9F7F5] ring-2 ring-accent/40":"hover:bg-[#FCFAF9] text-earth-700"),onClick:()=>n(e.id),children:[(0,r.jsx)(f.A,{size:14,className:"text-earth-700 opacity-0 group-hover:opacity-100 transition-opacity mr-1 cursor-grab"}),C&&(0,r.jsx)("button",{className:"p-1 mr-1 hover:bg-earth-200 rounded",onClick:t=>{t.stopPropagation(),a(e.id)},children:e.collapsed?(0,r.jsx)(p.A,{size:14}):(0,r.jsx)(h.A,{size:14})}),(0,r.jsx)("div",{onDoubleClick:t=>{t.stopPropagation(),L(e.id),T(e.content)},children:(e=>{switch(e){case"heading":return(0,r.jsx)(l.A,{className:"h-4 w-4 text-earth-700"});case"subheading":return(0,r.jsx)(o.A,{className:"h-4 w-4 text-earth-700"});case"text":return(0,r.jsx)(s.A,{className:"h-4 w-4 text-earth-700"});case"table":return(0,r.jsx)(d.A,{className:"h-4 w-4 text-earth-700"});case"image":return(0,r.jsx)(c.A,{className:"h-4 w-4 text-earth-700"});case"icon":return(0,r.jsx)(x.A,{className:"h-4 w-4 text-earth-700"});case"banner":return(0,r.jsx)(u.A,{className:"h-4 w-4 text-earth-700"});default:return null}})(e.type)}),I===e.id&&("heading"===e.type||"subheading"===e.type)?(0,r.jsx)("input",{autoFocus:!0,spellCheck:!1,value:R,onChange:e=>T(e.target.value),onBlur:()=>O(e.id),onKeyDown:t=>{"Enter"===t.key&&(t.preventDefault(),t.stopPropagation(),O(e.id)),"Escape"===t.key&&(["Enter","Escape"].includes(t.key)&&t.stopPropagation(),L(null))},className:N("ml-3 flex-1 bg-transparent focus:outline-none",0===i?"text-[15px] font-medium":1===i?"text-[14px]":"text-[13px]")}):(0,r.jsx)("span",{onDoubleClick:t=>{("heading"===e.type||"subheading"===e.type)&&(t.stopPropagation(),L(e.id),T(e.content))},className:N("ml-2 truncate flex-1",0===i?"text-[15px] font-medium":1===i?"text-[14px]":"text-[13px]"),children:function(e,t){if(!e)return"";if("string"==typeof e)return e.replace(/<[^>]+>/g,"").trim();switch(t){case"table":return"Table";case"image":return"Image";case"icon":return"Icon";case"banner":return"Banner";default:return""}}(e.content,e.type)||"New ".concat(e.type)}),I!==e.id&&(0,r.jsxs)("div",{className:"ml-auto hidden group-hover:flex items-center gap-2 pointer-events-none",children:[(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),A(e.id)},className:"p-1 rounded hover:bg-peach-50 pointer-events-auto",children:(0,r.jsx)(g.A,{size:18,className:e.pinned?"text-accent":"text-[#8A6F53]",fill:e.pinned?"currentColor":"none"})}),M(e.type).includes("subheading")&&(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),e.collapsed&&a(e.id),z("subheading",e.id)},className:"p-1 rounded bg-accent/40 hover:bg-accent/60 pointer-events-auto",title:"Add subheading",children:(0,r.jsx)(o.A,{size:14})}),M(e.type).includes("text")&&(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),e.collapsed&&a(e.id),z("text",e.id)},className:"p-1 rounded bg-accent/40 hover:bg-accent/60 pointer-events-auto",title:"Add text",children:(0,r.jsx)(s.A,{size:14})}),(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),D(e.id)},className:"p-1 rounded hover:bg-peach-50 pointer-events-auto",title:"Delete",children:(0,r.jsx)(m.A,{size:18})})]})]}),C&&!e.collapsed&&I!==e.id&&(0,r.jsxs)("div",{className:"relative w-full mb-2 bg-white rounded-b-md shadow-sm",children:[(0,r.jsx)("span",{className:"absolute left-6 top-4 bottom-4 w-px bg-[#D6C4B3]"}),(0,r.jsx)("div",{className:"pl-10 pr-4 py-4 space-y-2",children:(0,r.jsx)(v.Mp,{sensors:W,collisionDetection:v.Qo,onDragStart:_,onDragEnd:U,children:(0,r.jsx)(y.gB,{items:w.map(e=>e.id),strategy:y._G,children:w.map(e=>(0,r.jsx)(G,{id:e.id,children:q(e,i+1)},e.id))})})})]})]},e.id)};return i.useEffect(()=>{L(null)},[t]),(0,r.jsxs)("div",{className:"sm:w-[280px] md:w-[320px] lg:w-[360px] flex-shrink-0 bg-[#F7EDE2] px-4 py-6 overflow-y-auto sidebar-scroll border-r border-[#E8DFD6]",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-5",children:[(0,r.jsx)("h2",{className:"text-[22px] font-serif font-semibold text-earth-700 mb-3",children:"Sections"}),(0,r.jsxs)("div",{className:"flex gap-2 mt-1",children:[(0,r.jsx)(j.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-8 h-8 rounded-md bg-accent/40 hover:bg-accent/60 inline-flex items-center justify-center shadow-sm transition duration-150",onClick:()=>z("heading"),title:"Add heading",children:(0,r.jsx)(l.A,{size:14})}),(0,r.jsx)(j.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-8 h-8 rounded-md bg-accent/40 hover:bg-accent/60 inline-flex items-center justify-center shadow-sm transition duration-150",onClick:()=>{let n=t?e.find(e=>e.id===t):null;(null==n?void 0:n.type)==="heading"?(n.collapsed&&a(n.id),z("subheading",n.id)):z("subheading")},title:"Add subheading",children:(0,r.jsx)(o.A,{size:14})}),(0,r.jsx)(j.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-8 h-8 rounded-md bg-accent/40 hover:bg-accent/60 inline-flex items-center justify-center shadow-sm transition duration-150",onClick:()=>{let n=t?e.find(e=>e.id===t):null;n&&("heading"===n.type||"subheading"===n.type)?(n.collapsed&&a(n.id),z("text",n.id)):z("text")},title:"Add text",children:(0,r.jsx)(s.A,{size:14})})]})]}),E.length>0&&(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("h3",{className:"flex items-center text-[17px] font-serif font-medium mb-4 text-earth-700",children:[(0,r.jsx)(b.A,{size:16,className:"mr-2 text-light-brown"}),"Pinned"]}),E.map(e=>(0,r.jsxs)(G,{id:e.id,children:[q(e,0,!0),"   "]},e.id)),(0,r.jsx)("hr",{className:"mt-6 border-t border-[#EADFD4]"})]}),(0,r.jsxs)(v.Mp,{sensors:W,collisionDetection:v.Qo,onDragStart:_,onDragEnd:U,children:[(0,r.jsx)(y.gB,{items:F.map(e=>e.id),strategy:y._G,children:F.map(e=>(0,r.jsx)(G,{id:e.id,children:q(e,0)},e.id))}),0===F.length&&(0,r.jsx)(C,{})]})]})}var A=n(63727),S=n(69847),z=n(79015),D=n(17952),B=n(6368),E=n(10345),F=n(12377),I=n(45977),L=n(44713),R=n(86461),T=n(78572),H=n(498),P=n(55851),W=n(86739),M=n(47832),U=n(32196),_=n(20741),O=n(97216),G=n(12689);let K=[{label:"Small",value:"12px"},{label:"Normal",value:"16px"},{label:"Large",value:"20px"},{label:"X-Large",value:"28px"}],q=[{label:"Inter",value:"Inter, sans-serif"},{label:"Serif",value:"Georgia, serif"},{label:"Mono",value:'SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace'},{label:"Playfair",value:"Playfair Display, serif"}];function Q(e){let{content:t,onChange:n,type:a="text"}=e,l=(0,i.useRef)(null),[o,s]=(0,i.useState)(!1),[d,c]=(0,i.useState)(""),[x,u]=(0,i.useState)(""),[p,h]=(0,i.useState)("16px"),[g,m]=(0,i.useState)("#000000");(0,i.useEffect)(()=>{l.current&&t!==l.current.innerHTML&&(l.current.innerHTML=t||"")},[t]);let b=()=>{l.current&&n(l.current.innerHTML)},f=()=>{c(window.getSelection().toString()),s(!0)},v=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;document.execCommand(e,!1,n),null==(t=l.current)||t.focus(),b()},y=e=>{let t=window.getSelection();if(t.rangeCount>0){let n=t.getRangeAt(0);n.deleteContents();let r=document.createElement("div");r.innerHTML=e;let i=document.createDocumentFragment();for(;r.firstChild;)i.appendChild(r.firstChild);n.insertNode(i),t.removeAllRanges()}b()},j=e=>{let{onClick:t,icon:n,title:i,isActive:a=!1}=e;return(0,r.jsx)("button",{type:"button",onClick:t,className:"p-2 rounded hover:bg-earth-100 transition-colors ".concat(a?"bg-earth-200 text-accent":"text-earth-600"),title:i,children:(0,r.jsx)(n,{size:16})})};return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("div",{className:"flex flex-wrap gap-1 mb-2 items-center bg-white border border-earth-200 rounded-lg p-2 shadow-sm sticky top-0 z-10 w-full max-w-full overflow-x-auto",children:[(0,r.jsx)(j,{onClick:()=>v("bold"),icon:z.A,title:"Bold",isActive:document.queryCommandState("bold")}),(0,r.jsx)(j,{onClick:()=>v("italic"),icon:D.A,title:"Italic",isActive:document.queryCommandState("italic")}),(0,r.jsx)(j,{onClick:()=>v("underline"),icon:B.A,title:"Underline",isActive:document.queryCommandState("underline")}),(0,r.jsx)(j,{onClick:()=>v("insertUnorderedList"),icon:M.A,title:"Bullet List"}),(0,r.jsx)(j,{onClick:()=>v("insertOrderedList"),icon:U.A,title:"Numbered List"}),(0,r.jsx)(j,{onClick:()=>{y('\n      <div class="flex items-center gap-2 my-2">\n        <input type="checkbox" class="rounded border-earth-300 text-accent focus:ring-accent" />\n        <span contenteditable="true" class="flex-1">New task</span>\n      </div>\n    ')},icon:_.A,title:"Todo"}),(0,r.jsx)(j,{onClick:()=>{y('\n      <blockquote class="border-l-4 border-accent pl-4 my-4 italic text-earth-600">\n        <p contenteditable="true">Your quote here...</p>\n      </blockquote>\n    ')},icon:O.A,title:"Quote"}),(0,r.jsx)(j,{onClick:()=>{y('\n      <pre class="bg-earth-100 rounded-lg p-4 my-4 overflow-x-auto">\n        <code contenteditable="true" class="text-earth-800 font-mono text-sm">// Your code here</code>\n      </pre>\n    ')},icon:G.A,title:"Code Block"}),(0,r.jsx)("div",{className:"w-px h-6 bg-earth-200 mx-2"}),(0,r.jsx)("select",{value:x,onChange:e=>{u(e.target.value),v("fontName",e.target.value)},className:"rounded px-2 py-1 border border-earth-200 text-xs focus:outline-accent",title:"Font family",children:q.map(e=>(0,r.jsx)("option",{value:e.value,style:{fontFamily:e.value},children:e.label},e.value))}),(0,r.jsx)("select",{value:p,onChange:e=>{h(e.target.value),v("fontSize",K.findIndex(t=>t.value===e.target.value)+1)},className:"rounded px-2 py-1 border border-earth-200 text-xs focus:outline-accent",title:"Font size",children:K.map((e,t)=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,r.jsx)("input",{type:"color",value:g,onChange:e=>{m(e.target.value),v("foreColor",e.target.value)},className:"w-6 h-6 rounded border border-earth-200 ml-2",title:"Text color"}),(0,r.jsx)("button",{type:"button",className:"ml-1 px-2 py-1 rounded bg-earth-100 hover:bg-earth-200 text-xs text-earth-700",onClick:()=>v("removeFormat"),title:"Clear formatting",children:"Clear"})]}),(0,r.jsx)("div",{ref:l,contentEditable:!0,suppressContentEditableWarning:!0,onInput:b,onMouseUp:f,onKeyUp:f,onBlur:()=>s(!1),className:"prose prose-earth max-w-full w-full min-h-[120px] p-4 rounded-lg border border-earth-200 focus:outline-none focus:ring-2 focus:ring-accent/20 focus:border-accent overflow-x-auto",style:{lineHeight:"1.7",fontSize:p,fontFamily:x,color:g},placeholder:"Start typing..."})]})}var J=n(84296),X=n(70672);function Y(e){let{content:t,onChange:n,onSave:l,onCancel:o}=e,[s,d]=(0,i.useState)(()=>t&&t.rows?t:{rows:[["Header 1","Header 2","Header 3"],["Row 1 Col 1","Row 1 Col 2","Row 1 Col 3"],["Row 2 Col 1","Row 2 Col 2","Row 2 Col 3"]],hasHeader:!0});(0,i.useEffect)(()=>{t&&JSON.stringify(t)!==JSON.stringify(s)&&d(t)},[t]);let c=(e,t,r)=>{let i=[...s.rows];i[e][t]=r;let a={...s,rows:i};d(a),n(a)};return(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-earth-200 p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-4 flex-wrap",children:[(0,r.jsxs)("button",{onClick:()=>{var e;let t=Array((null==(e=s.rows[0])?void 0:e.length)||3).fill(""),r={...s,rows:[...s.rows,t]};d(r),n(r)},className:"px-3 py-1 bg-earth-100 hover:bg-earth-200 rounded text-sm flex items-center gap-1",children:[(0,r.jsx)(a.A,{size:14}),"Add Row"]}),(0,r.jsxs)("button",{onClick:()=>{let e=s.rows.map(e=>[...e,""]),t={...s,rows:e};d(t),n(t)},className:"px-3 py-1 bg-earth-100 hover:bg-earth-200 rounded text-sm flex items-center gap-1",children:[(0,r.jsx)(a.A,{size:14}),"Add Column"]}),(0,r.jsx)("button",{onClick:()=>{let e={...s,hasHeader:!s.hasHeader};d(e),n(e)},className:"px-3 py-1 rounded text-sm ".concat(s.hasHeader?"bg-accent text-white":"bg-earth-100 hover:bg-earth-200"),children:"Header Row"})]}),(0,r.jsx)("div",{className:"overflow-x-auto mb-4",children:(0,r.jsx)("table",{className:"w-full border-collapse border border-earth-300",children:(0,r.jsx)("tbody",{children:s.rows.map((e,t)=>(0,r.jsxs)("tr",{children:[e.map((e,i)=>(0,r.jsx)("td",{className:"border border-earth-300 p-2 relative group",children:0===t&&s.hasHeader?(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("input",{type:"text",value:e,onChange:e=>c(t,i,e.target.value),className:"w-full bg-earth-50 font-semibold focus:outline-none focus:bg-white",placeholder:"Header"}),(0,r.jsx)("button",{onClick:()=>(e=>{var t;if((null==(t=s.rows[0])?void 0:t.length)<=1)return;let r=s.rows.map(t=>t.filter((t,n)=>n!==e)),i={...s,rows:r};d(i),n(i)})(i),className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity p-1 bg-red-100 hover:bg-red-200 rounded text-red-600 z-10",title:"Remove column",style:{pointerEvents:"auto"},children:(0,r.jsx)(J.A,{size:12})})]}):(0,r.jsx)("input",{type:"text",value:e,onChange:e=>c(t,i,e.target.value),className:"w-full bg-transparent focus:outline-none focus:bg-earth-50",placeholder:"Cell content"})},i)),(0,r.jsx)("td",{className:"border-none p-2 group",children:(0,r.jsx)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:(0,r.jsx)("button",{onClick:()=>(e=>{if(s.rows.length<=1)return;let t=s.rows.filter((t,n)=>n!==e),r={...s,rows:t};d(r),n(r)})(t),className:"p-1 bg-red-100 hover:bg-red-200 rounded text-red-600",title:"Remove row",children:(0,r.jsx)(J.A,{size:12})})})})]},t))})})}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)("button",{onClick:l,className:"px-4 py-2 bg-accent text-white rounded hover:bg-accent/90 flex items-center gap-2",children:[(0,r.jsx)(E.A,{size:16}),"Save Table"]}),(0,r.jsxs)("button",{onClick:o,className:"px-4 py-2 bg-earth-100 hover:bg-earth-200 rounded flex items-center gap-2",children:[(0,r.jsx)(X.A,{size:16}),"Cancel"]})]})]})}var $=n(14564),V=n(26257);function Z(e){let{content:t,onChange:n,onSave:a,onCancel:l}=e,[o,s]=(0,i.useState)(()=>t&&t.url?t:{url:"",alt:"",caption:"",width:"auto",alignment:"center"}),[d,x]=(0,i.useState)("url"),u=e=>{let t={...o,...e};s(t),n&&n(t)};return(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-earth-200 p-4",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,r.jsx)(c.A,{size:20}),"Add Image"]}),(0,r.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,r.jsxs)("button",{onClick:()=>x("url"),className:"px-3 py-2 rounded text-sm ".concat("url"===d?"bg-accent text-white":"bg-earth-100 hover:bg-earth-200"),children:[(0,r.jsx)($.A,{size:14,className:"inline mr-1"}),"URL"]}),(0,r.jsxs)("button",{onClick:()=>x("upload"),className:"px-3 py-2 rounded text-sm ".concat("upload"===d?"bg-accent text-white":"bg-earth-100 hover:bg-earth-200"),children:[(0,r.jsx)(V.A,{size:14,className:"inline mr-1"}),"Upload"]}),(0,r.jsxs)("button",{onClick:()=>x("sample"),className:"px-3 py-2 rounded text-sm ".concat("sample"===d?"bg-accent text-white":"bg-earth-100 hover:bg-earth-200"),children:[(0,r.jsx)(c.A,{size:14,className:"inline mr-1"}),"Sample"]})]}),"url"===d&&(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)("input",{type:"text",value:o.url,onChange:e=>u({url:e.target.value}),placeholder:"Paste image URL...",className:"w-full px-3 py-2 border border-earth-300 rounded focus:ring-2 focus:ring-accent focus:border-accent"})}),"upload"===d&&(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files[0];if(t){let e=new FileReader;e.onload=e=>{u({url:e.target.result})},e.readAsDataURL(t)}},className:"w-full"})}),"sample"===d&&(0,r.jsx)("div",{className:"mb-4 grid grid-cols-2 gap-2",children:["https://images.pexels.com/photos/1181533/pexels-photo-1181533.jpeg?auto=compress&cs=tinysrgb&w=800","https://images.pexels.com/photos/1181244/pexels-photo-1181244.jpeg?auto=compress&cs=tinysrgb&w=800","https://images.pexels.com/photos/1181316/pexels-photo-1181316.jpeg?auto=compress&cs=tinysrgb&w=800","https://images.pexels.com/photos/1181406/pexels-photo-1181406.jpeg?auto=compress&cs=tinysrgb&w=800"].map(e=>(0,r.jsx)("img",{src:e,alt:"Sample",className:"rounded cursor-pointer border-2 border-transparent hover:border-accent",style:{maxHeight:80,objectFit:"cover"},onClick:()=>u({url:e})},e))}),o.url&&(0,r.jsx)("div",{className:"mb-4 text-center",children:(0,r.jsx)("img",{src:o.url,alt:o.alt||"",className:"rounded max-w-full mx-auto",style:{maxHeight:240,display:"block",margin:"0 auto"}})}),(0,r.jsxs)("div",{className:"mb-4 flex gap-2",children:[(0,r.jsx)("input",{type:"text",value:o.alt,onChange:e=>u({alt:e.target.value}),placeholder:"Alt text (for accessibility)",className:"flex-1 px-3 py-2 border border-earth-300 rounded focus:ring-2 focus:ring-accent focus:border-accent"}),(0,r.jsx)("input",{type:"text",value:o.caption,onChange:e=>u({caption:e.target.value}),placeholder:"Caption (optional)",className:"flex-1 px-3 py-2 border border-earth-300 rounded focus:ring-2 focus:ring-accent focus:border-accent"})]}),(0,r.jsxs)("div",{className:"flex gap-2 justify-end",children:[l&&(0,r.jsx)("button",{onClick:l,className:"px-3 py-1 rounded bg-earth-100 hover:bg-earth-200 text-earth-700",children:"Cancel"}),a&&(0,r.jsxs)("button",{onClick:()=>a(o),className:"px-3 py-1 rounded bg-accent text-white hover:bg-accent/90 flex items-center gap-1",children:[(0,r.jsx)(E.A,{size:16})," Save"]})]})]})}var ee=n(79516);function et(e){let{content:t,onChange:n,onSave:a,onCancel:l}=e,[o,s]=(0,i.useState)(()=>t&&t.icon?t:{icon:"Star",text:"Your text here",size:"medium",color:"#C4A484",layout:"horizontal"}),[d,c]=(0,i.useState)(""),x=Object.keys(R).filter(e=>"default"!==e&&"createLucideIcon"!==e&&"function"==typeof R[e]).filter(e=>e.toLowerCase().includes(d.toLowerCase())).slice(0,50),u=e=>{let t={...o,...e};s(t),n&&n(t)},p=R[o.icon]||g.A;return(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-earth-200 p-4",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,r.jsx)(p,{size:20}),"Add Icon Block"]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Choose Icon"}),(0,r.jsxs)("div",{className:"relative mb-3",children:[(0,r.jsx)(ee.A,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-earth-400"}),(0,r.jsx)("input",{type:"text",value:d,onChange:e=>c(e.target.value),placeholder:"Search icons...",className:"w-full pl-10 pr-4 py-2 border border-earth-300 rounded focus:ring-2 focus:ring-accent focus:border-accent"})]}),(0,r.jsx)("div",{className:"grid grid-cols-8 gap-2 max-h-48 overflow-y-auto border border-earth-200 rounded p-2",children:x.map(e=>{let t=R[e];return(0,r.jsx)("button",{onClick:()=>u({icon:e}),className:"p-2 rounded hover:bg-earth-100 flex items-center justify-center ".concat(o.icon===e?"bg-accent text-white":""),children:(0,r.jsx)(t,{size:20})},e)})})]}),(0,r.jsx)("div",{className:"flex items-center gap-4 mb-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(p,{size:{small:16,medium:24,large:32,xlarge:48}[o.size]||24,color:o.color}),(0,r.jsx)("input",{type:"text",value:o.text,onChange:e=>u({text:e.target.value}),className:"bg-transparent border-b border-earth-200 outline-none text-base font-medium px-2",placeholder:"Icon text..."})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,r.jsx)("label",{className:"text-sm",children:"Size:"}),(0,r.jsxs)("select",{value:o.size,onChange:e=>u({size:e.target.value}),className:"rounded px-2 py-1 border border-earth-200 text-xs focus:outline-accent",children:[(0,r.jsx)("option",{value:"small",children:"Small"}),(0,r.jsx)("option",{value:"medium",children:"Medium"}),(0,r.jsx)("option",{value:"large",children:"Large"}),(0,r.jsx)("option",{value:"xlarge",children:"X-Large"})]}),(0,r.jsx)("label",{className:"text-sm ml-4",children:"Color:"}),(0,r.jsx)("div",{className:"flex gap-2 items-center",children:["#C4A484","#4A3B2F","#8A6F53","#D4B5A0","#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#6B7280","#000000"].map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>u({color:e}),style:{backgroundColor:e,borderColor:e===o.color?"#8A6F53":"#ddd"},className:"w-6 h-6 rounded-full border-2 transition-all ".concat(e===o.color?"ring-2 ring-accent scale-110":""," hover:scale-105 hover:ring-2 hover:ring-accent/40"),title:e,children:e===o.color&&(0,r.jsx)("span",{className:"block w-2 h-2 rounded-full bg-white mx-auto my-auto mt-2"})},e))})]}),(0,r.jsxs)("div",{className:"flex gap-2 justify-end",children:[l&&(0,r.jsx)("button",{onClick:l,className:"px-3 py-1 rounded bg-earth-100 hover:bg-earth-200 text-earth-700",children:"Cancel"}),a&&(0,r.jsxs)("button",{onClick:()=>a(o),className:"px-3 py-1 rounded bg-accent text-white hover:bg-accent/90 flex items-center gap-1",children:[(0,r.jsx)(E.A,{size:16})," Save"]})]})]})}function en(e){let{content:t,onChange:n,onSave:a,onCancel:l}=e,[o,s]=(0,i.useState)(()=>t&&t.text?t:{text:"This is an important announcement!",type:"info",showIcon:!0,dismissible:!1}),d=[{type:"info",label:"Info",icon:T.A,bgColor:"bg-blue-50",borderColor:"border-blue-200",textColor:"text-blue-800",iconColor:"text-blue-600"},{type:"success",label:"Success",icon:H.A,bgColor:"bg-green-50",borderColor:"border-green-200",textColor:"text-green-800",iconColor:"text-green-600"},{type:"warning",label:"Warning",icon:P.A,bgColor:"bg-yellow-50",borderColor:"border-yellow-200",textColor:"text-yellow-800",iconColor:"text-yellow-600"},{type:"error",label:"Error",icon:W.A,bgColor:"bg-red-50",borderColor:"border-red-200",textColor:"text-red-800",iconColor:"text-red-600"},{type:"neutral",label:"Neutral",icon:u.A,bgColor:"bg-earth-50",borderColor:"border-earth-200",textColor:"text-earth-800",iconColor:"text-earth-600"}],c=e=>{let t={...o,...e};s(t),n&&n(t)},x=d.find(e=>e.type===o.type)||d[0],p=x.icon;return(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-earth-200 p-4",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,r.jsx)(u.A,{size:20}),"Add Banner"]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Banner Type"}),(0,r.jsx)("div",{className:"grid grid-cols-5 gap-2",children:d.map(e=>{let t=e.icon;return(0,r.jsxs)("button",{onClick:()=>c({type:e.type}),className:"p-3 rounded border-2 flex flex-col items-center gap-1 transition-all ".concat(o.type===e.type?"".concat(e.borderColor," ").concat(e.bgColor):"border-earth-200 hover:border-earth-300"),children:[(0,r.jsx)(t,{size:20,className:e.iconColor}),(0,r.jsx)("span",{className:"text-xs font-medium ".concat(e.textColor),children:e.label})]},e.type)})})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 rounded border p-3 mb-4 ".concat(x.bgColor," ").concat(x.borderColor),children:[!1!==o.showIcon&&(0,r.jsx)(p,{size:24,className:x.iconColor}),(0,r.jsx)("input",{type:"text",value:o.text,onChange:e=>c({text:e.target.value}),className:"flex-1 bg-transparent border-none outline-none text-base font-medium ".concat(x.textColor),placeholder:"Banner text..."})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)("input",{type:"checkbox",checked:!1!==o.showIcon,onChange:e=>c({showIcon:e.target.checked})}),"Show icon"]}),(0,r.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)("input",{type:"checkbox",checked:o.dismissible||!1,onChange:e=>c({dismissible:e.target.checked})}),"Dismissible"]})]}),(0,r.jsxs)("div",{className:"flex gap-2 justify-end",children:[l&&(0,r.jsx)("button",{onClick:l,className:"px-3 py-1 rounded bg-earth-100 hover:bg-earth-200 text-earth-700",children:"Cancel"}),a&&(0,r.jsxs)("button",{onClick:()=>a(o),className:"px-3 py-1 rounded bg-accent text-white hover:bg-accent/90 flex items-center gap-1",children:[(0,r.jsx)(E.A,{size:16})," Save"]})]})]})}let er=e=>e.replace(/<[^>]+>/g,"").trim();function ei(e){var t,n;let{section:l,onSave:o,children:s,isDraggingOverlay:d=!1,isEditing:c,onEdit:x}=e,{addSection:b,updateSection:v,deleteSection:j,sections:C}=(0,w.b)(),[k,M]=(0,i.useState)(!1),U=["text","table","image","icon","banner"].includes(l.type)?c:k,[_,O]=(0,i.useState)(!0),[G,K]=(0,i.useState)(null!=(t=l.content)?t:""),[q,J]=(0,i.useState)(null!=(n=l.content)?n:""),[X,$]=(0,i.useState)(l.headingColor||"#000000"),[V,ee]=(0,i.useState)(!!l.headingBold),[ei,ea]=(0,i.useState)(!!l.headingItalic),[el,eo]=(0,i.useState)(!!l.headingUnderline),es=[{label:"Default",val:""},{label:"Serif",val:"serif"},{label:"Sans",val:"Inter, sans-serif"},{label:"Playfair",val:'"Playfair Display", serif'},{label:"Monospace",val:"monospace"},{label:"Georgia",val:"Georgia, serif"},{label:"Courier New",val:'"Courier New", monospace'}],[ed,ec]=(0,i.useState)(l.headingFont||""),ex="proibe_heading_colors",eu=["#000000","#DEB887","#B5C18E","#8B4513","#A0522D"],[ep,eh]=(0,i.useState)(()=>{try{return JSON.parse(localStorage.getItem(ex))||[]}catch(e){return[]}}),eg=[...eu,...ep],[em,eb]=(0,i.useState)("#000000"),{attributes:ef,listeners:ev,setNodeRef:ey,transform:ej,transition:ew,isDragging:eN}=(0,y.gl)({id:l.id}),eC=d?void 0:{transform:A.Ks.Transform.toString(ej),transition:ew,zIndex:+!!eN},ek=()=>{let e=C.filter(e=>e.parent===l.parent),t=e.findIndex(e=>e.id===l.id);return t>0?e[t-1]:null},eA=()=>{v(l.id,{content:G}),o&&o(l.id,G),M(!1),x&&x(null)};function eS(e){if(e.preventDefault(),!ep.includes(em)&&!eu.includes(em)){let e=[...ep,em];eh(e),localStorage.setItem(ex,JSON.stringify(e))}$(em)}if("text"===l.type)if(U)return(0,r.jsxs)("div",{ref:ey,className:"flex items-start group relative",style:{paddingLeft:0,paddingRight:0,marginTop:l.parent?"18px":"0",marginBottom:"2px"},children:[(0,r.jsx)("div",{...ef,...ev,className:"ml-2 mt-2 opacity-0 group-hover:opacity-100 cursor-grab transition-opacity",style:{minWidth:20},title:"Drag",children:(0,r.jsx)(f.A,{className:"text-light-brown"})}),(0,r.jsxs)("div",{className:"flex-1 bg-white rounded-xl shadow-sm border border-light-brown/10 p-2 ml-1",children:[(0,r.jsx)(Q,{content:G,onChange:K,type:l.type}),(0,r.jsxs)("button",{onClick:eA,className:"mt-2 px-3 py-1.5 bg-light-brown/10 rounded hover:bg-light-brown/20 text-light-brown flex items-center",children:[(0,r.jsx)(E.A,{size:14,className:"mr-1"}),"Save"]})]}),(0,r.jsx)("button",{onClick:()=>j(l.id),className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity p-1.5 rounded-full hover:bg-red-100 text-red-500 z-10",title:"Delete",children:(0,r.jsx)(m.A,{size:16})})]});else return(0,r.jsxs)("div",{ref:ey,className:"flex items-start group relative",style:{paddingLeft:0,paddingRight:0,marginTop:l.parent?"18px":"0",marginBottom:"2px"},children:[(0,r.jsx)("div",{...ef,...ev,className:"ml-2 mt-2 opacity-0 group-hover:opacity-100 cursor-grab transition-opacity",style:{minWidth:20},title:"Drag",children:(0,r.jsx)(f.A,{className:"text-light-brown"})}),(0,r.jsx)("div",{className:"flex-1 prose max-w-none tiptap bg-white rounded-xl shadow-sm border border-light-brown/10 p-2 ml-1",dangerouslySetInnerHTML:{__html:G&&G.trim()?G:'<span class="text-earth-400 italic">Click to add text…</span>'},onClick:()=>x&&x(l.id),title:"Click to edit",style:{cursor:"pointer",minHeight:32}}),(0,r.jsx)("button",{onClick:()=>j(l.id),className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity p-1.5 rounded-full hover:bg-red-100 text-red-500 z-10",title:"Delete",children:(0,r.jsx)(m.A,{size:16})})]});if("table"===l.type)if(U)return(0,r.jsxs)("div",{ref:ey,className:"flex items-start group relative",style:{paddingLeft:0,paddingRight:0,marginTop:l.parent?"18px":"0",marginBottom:"2px"},children:[(0,r.jsx)("div",{...ef,...ev,className:"ml-2 mt-2 opacity-0 group-hover:opacity-100 cursor-grab transition-opacity",style:{minWidth:20},title:"Drag",children:(0,r.jsx)(f.A,{className:"text-light-brown"})}),(0,r.jsx)("div",{className:"flex-1 bg-white rounded-xl shadow-sm border border-light-brown/10 p-2 ml-1",children:(0,r.jsx)(Y,{content:G,onChange:K,onSave:eA,onCancel:()=>x&&x(null)})}),(0,r.jsx)("button",{onClick:()=>j(l.id),className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity p-1.5 rounded-full hover:bg-red-100 text-red-500 z-10",title:"Delete",children:(0,r.jsx)(m.A,{size:16})})]});else return(0,r.jsxs)("div",{ref:ey,className:"flex items-start group relative",style:{paddingLeft:0,paddingRight:0,marginTop:l.parent?"18px":"0",marginBottom:"2px"},children:[(0,r.jsx)("div",{...ef,...ev,className:"ml-2 mt-2 opacity-0 group-hover:opacity-100 cursor-grab transition-opacity",style:{minWidth:20},title:"Drag",children:(0,r.jsx)(f.A,{className:"text-light-brown"})}),(0,r.jsx)("div",{className:"flex-1 overflow-x-auto bg-earth-50 rounded-lg border border-earth-200 p-4 min-h-[60px] cursor-pointer hover:bg-earth-100 transition",onClick:()=>x&&x(l.id),title:"Click to edit table",children:G&&G.rows&&G.rows.length>0?(0,r.jsx)("table",{className:"min-w-[200px] border border-earth-200 text-sm w-full",children:(0,r.jsx)("tbody",{children:G.rows.map((e,t)=>(0,r.jsx)("tr",{children:e.map((e,n)=>(0,r.jsx)("td",{className:"border border-earth-200 px-2 py-1 ".concat(0===t&&G.hasHeader?"font-semibold bg-earth-100":""),children:e},n))},t))})}):(0,r.jsx)("span",{className:"text-earth-400 italic",children:"Empty table"})}),(0,r.jsx)("button",{onClick:()=>j(l.id),className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity p-1.5 rounded-full hover:bg-red-100 text-red-500 z-10",title:"Delete",children:(0,r.jsx)(m.A,{size:16})})]});if("image"===l.type)if(U)return(0,r.jsxs)("div",{ref:ey,className:"flex items-start group relative",style:{paddingLeft:0,paddingRight:0,marginTop:l.parent?"18px":"0",marginBottom:"2px"},children:[(0,r.jsx)("div",{...ef,...ev,className:"ml-2 mt-2 opacity-0 group-hover:opacity-100 cursor-grab transition-opacity",style:{minWidth:20},title:"Drag",children:(0,r.jsx)(f.A,{className:"text-light-brown"})}),(0,r.jsx)("div",{className:"flex-1 bg-white rounded-xl shadow-sm border border-light-brown/10 p-2 ml-1",children:(0,r.jsx)(Z,{content:G,onChange:K,onSave:eA,onCancel:()=>x&&x(null)})}),(0,r.jsx)("button",{onClick:()=>j(l.id),className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity p-1.5 rounded-full hover:bg-red-100 text-red-500 z-10",title:"Delete",children:(0,r.jsx)(m.A,{size:16})})]});else return(0,r.jsxs)("div",{ref:ey,className:"flex items-start group relative",style:{paddingLeft:0,paddingRight:0,marginTop:l.parent?"18px":"0",marginBottom:"2px"},children:[(0,r.jsx)("div",{...ef,...ev,className:"ml-2 mt-2 opacity-0 group-hover:opacity-100 cursor-grab transition-opacity",style:{minWidth:20},title:"Drag",children:(0,r.jsx)(f.A,{className:"text-light-brown"})}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center bg-earth-50 rounded-lg border border-earth-200 p-4 min-h-[120px] cursor-pointer hover:bg-earth-100 transition",onClick:()=>x&&x(l.id),title:"Click to edit image",children:[G&&G.url?(0,r.jsx)("img",{src:G.url,alt:G.alt||"",className:"rounded shadow-sm ".concat("small"===G.width?"w-[300px]":"medium"===G.width?"w-[500px]":"large"===G.width?"w-[700px]":"full"===G.width?"w-full":"max-w-full h-auto"),style:{maxHeight:"220px",objectFit:"cover",display:"block",margin:"0 auto"}}):(0,r.jsx)("span",{className:"text-earth-400 italic w-full text-center block",children:"No image selected"}),G&&G.caption&&(0,r.jsx)("div",{className:"text-xs text-earth-600 mt-2 text-center",children:G.caption})]}),(0,r.jsx)("button",{onClick:()=>j(l.id),className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity p-1.5 rounded-full hover:bg-red-100 text-red-500 z-10",title:"Delete",children:(0,r.jsx)(m.A,{size:16})})]});if("icon"===l.type)if(U)return(0,r.jsxs)("div",{ref:ey,className:"flex items-start group relative",style:{paddingLeft:0,paddingRight:0,marginTop:l.parent?"18px":"0",marginBottom:"2px"},children:[(0,r.jsx)("div",{...ef,...ev,className:"ml-2 mt-2 opacity-0 group-hover:opacity-100 cursor-grab transition-opacity",style:{minWidth:20},title:"Drag",children:(0,r.jsx)(f.A,{className:"text-light-brown"})}),(0,r.jsx)("div",{className:"flex-1 bg-white rounded-xl shadow-sm border border-light-brown/10 p-2 ml-1",children:(0,r.jsx)(et,{content:G,onChange:K,onSave:eA,onCancel:()=>x&&x(null)})}),(0,r.jsx)("button",{onClick:()=>j(l.id),className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity p-1.5 rounded-full hover:bg-red-100 text-red-500 z-10",title:"Delete",children:(0,r.jsx)(m.A,{size:16})})]});else{let e=G&&G.icon&&R[G.icon]?R[G.icon]:g.A;return(0,r.jsxs)("div",{ref:ey,className:"flex items-start group gap-3 bg-earth-50 rounded-lg border border-earth-200 p-4 min-h-[60px] cursor-pointer hover:bg-earth-100 transition ".concat((null==G?void 0:G.layout)==="vertical"?"flex-col items-start":""),style:{paddingLeft:0,paddingRight:0,marginTop:l.parent?"18px":"0",marginBottom:"2px"},onClick:()=>x&&x(l.id),title:"Click to edit icon block",children:[(0,r.jsx)(e,{size:(null==G?void 0:G.size)==="xlarge"?48:(null==G?void 0:G.size)==="large"?32:(null==G?void 0:G.size)==="medium"?24:16,style:{color:(null==G?void 0:G.color)||"#8A6F53"}}),(0,r.jsx)("span",{className:"text-earth-800 text-base",children:(null==G?void 0:G.text)?G.text.split("\n").map((e,t)=>(0,r.jsxs)("span",{children:[e,(0,r.jsx)("br",{})]},t)):(0,r.jsx)("span",{className:"text-earth-400 italic",children:"No text"})})]})}if("banner"===l.type){let e=[{type:"info",icon:T.A,bgColor:"bg-blue-50",borderColor:"border-blue-200",textColor:"text-blue-800",iconColor:"text-blue-600"},{type:"success",icon:H.A,bgColor:"bg-green-50",borderColor:"border-green-200",textColor:"text-green-800",iconColor:"text-green-600"},{type:"warning",icon:P.A,bgColor:"bg-yellow-50",borderColor:"border-yellow-200",textColor:"text-yellow-800",iconColor:"text-yellow-600"},{type:"error",icon:W.A,bgColor:"bg-red-50",borderColor:"border-red-200",textColor:"text-red-800",iconColor:"text-red-600"},{type:"neutral",icon:u.A,bgColor:"bg-earth-50",borderColor:"border-earth-200",textColor:"text-earth-800",iconColor:"text-earth-600"}],t=e.find(e=>e.type===((null==G?void 0:G.type)||"info"))||e[0],n=t.icon;return U?(0,r.jsxs)("div",{ref:ey,className:"flex items-start group relative",style:{paddingLeft:0,paddingRight:0,marginTop:l.parent?"18px":"0",marginBottom:"2px"},children:[(0,r.jsx)("div",{...ef,...ev,className:"ml-2 mt-2 opacity-0 group-hover:opacity-100 cursor-grab transition-opacity",style:{minWidth:20},title:"Drag",children:(0,r.jsx)(f.A,{className:"text-light-brown"})}),(0,r.jsx)("div",{className:"flex-1 bg-white rounded-xl shadow-sm border border-light-brown/10 p-2 ml-1",children:(0,r.jsx)(en,{content:G,onChange:K,onSave:eA,onCancel:()=>x&&x(null)})}),(0,r.jsx)("button",{onClick:()=>j(l.id),className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity p-1.5 rounded-full hover:bg-red-100 text-red-500 z-10",title:"Delete",children:(0,r.jsx)(m.A,{size:16})})]}):(0,r.jsxs)("div",{ref:ey,className:"flex items-start group ".concat(t.bgColor," ").concat(t.borderColor," rounded-lg border p-4 min-h-[48px] cursor-pointer hover:bg-opacity-80 transition"),style:{paddingLeft:0,paddingRight:0,marginTop:l.parent?"18px":"0",marginBottom:"2px"},onClick:()=>x&&x(l.id),title:"Click to edit banner",children:[(null==G?void 0:G.showIcon)!==!1&&(0,r.jsx)(n,{size:20,className:t.iconColor}),(0,r.jsx)("span",{className:"ml-2 ".concat(t.textColor," font-semibold"),children:(null==G?void 0:G.text)||(0,r.jsx)("span",{className:"text-earth-400 italic",children:"Banner"})})]})}return i.useEffect(()=>{var e;K(null!=(e=l.content)?e:"")},[l.content]),(0,r.jsxs)("div",{ref:ey,style:eC,className:N("bg-white bg-opacity-90 rounded-xl shadow-sm mb-4","heading"===l.type&&"border-2 border-light-brown/20","subheading"===l.type&&"border border-light-brown/10",eN&&"opacity-50"),children:[("heading"===l.type||"subheading"===l.type)&&(0,r.jsxs)("div",{className:"p-4 flex items-center justify-between group",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,r.jsx)("div",{...ef,...ev,className:"opacity-0 group-hover:opacity-100 cursor-grab",children:(0,r.jsx)(f.A,{className:"text-light-brown/60 hover:text-light-brown"})}),s&&(0,r.jsx)("button",{onClick:()=>O(!_),className:"p-1 hover:bg-light-brown/10 rounded",children:_?(0,r.jsx)(h.A,{size:16}):(0,r.jsx)(p.A,{size:16})}),k?(0,r.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,r.jsx)("input",{autoFocus:!0,value:q,onChange:e=>J(e.target.value),onBlur:()=>{},onKeyDown:e=>{if("Enter"===e.key){let e=q.trim()||"Untitled";v(l.id,{content:e,headingColor:X,headingBold:V,headingItalic:ei,headingUnderline:el,headingFont:ed}),K(e),M(!1)}"Escape"===e.key&&M(!1)},className:N("w-full bg-pale-beige/80 rounded px-2 py-1 outline-none mb-1","heading"===l.type&&"text-2xl font-playfair font-bold","subheading"===l.type&&"text-xl font-medium"),style:{color:X,fontWeight:V?"bold":void 0,fontStyle:ei?"italic":void 0,textDecoration:el?"underline":void 0},placeholder:"heading"===l.type?"Enter heading…":"Enter subheading…"}),(0,r.jsx)(function(){let[e,t]=(0,i.useState)(!1),n=i.useRef(null);i.useEffect(()=>{if(e)return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r);function r(e){var r;(null==(r=n.current)?void 0:r.contains(e.target))||t(!1)}},[e]);let a="heading"===l.type?"right-0":(l.type,"left-0");return(0,r.jsxs)("div",{className:"relative inline-block heading-style-toolbar",ref:n,children:[(0,r.jsx)("button",{type:"button",className:"p-1 rounded bg-accent/40 hover:bg-accent/60 text-earth-700",onClick:()=>t(e=>!e),title:"Style",children:(0,r.jsx)(S.A,{size:18})}),e&&(0,r.jsxs)("div",{className:"absolute top-full mt-2 z-50 bg-pale-beige border border-accent rounded-lg shadow-lg px-3 py-2 flex flex-col gap-2 items-start w-[min(320px,90vw)] max-w-xs min-w-[220px] ".concat(a),style:{left:"text"===l.type?0:void 0,right:"heading"===l.type?0:void 0,overflowX:"auto"},children:[(0,r.jsxs)("div",{className:"flex gap-2 items-center flex-wrap",children:[(0,r.jsx)("button",{type:"button",className:N("p-1 rounded hover:bg-light-brown/20",V&&"bg-light-brown/30"),title:"Bold",onClick:()=>ee(e=>!e),children:(0,r.jsx)(z.A,{size:16})}),(0,r.jsx)("button",{type:"button",className:N("p-1 rounded hover:bg-light-brown/20",ei&&"bg-light-brown/30"),title:"Italic",onClick:()=>ea(e=>!e),children:(0,r.jsx)(D.A,{size:16})}),(0,r.jsx)("button",{type:"button",className:N("p-1 rounded hover:bg-light-brown/20",el&&"bg-light-brown/30"),title:"Underline",onClick:()=>eo(e=>!e),children:(0,r.jsx)(B.A,{size:16})}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)("select",{value:ed,onChange:e=>ec(e.target.value),className:"rounded px-1 py-0.5 border border-light-brown text-xs",style:{fontFamily:ed||void 0,maxWidth:120},title:"Font style",children:es.map(e=>(0,r.jsx)("option",{value:e.val,style:{fontFamily:e.val||void 0,fontWeight:V?"bold":void 0,fontStyle:ei?"italic":void 0,textDecoration:el?"underline":void 0},children:e.label},e.val))})})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 items-center mt-2",children:[eg.map((e,t)=>(0,r.jsx)("button",{type:"button",onClick:()=>$(e),style:{backgroundColor:e,borderColor:e===X?"#8A6F53":"#ddd"},className:N("w-6 h-6 rounded-full border-2 transition-all",e===X&&"ring-2 ring-accent scale-110","hover:scale-105 hover:ring-2 hover:ring-accent/40"),title:e,children:e===X&&(0,r.jsx)("span",{className:"block w-2 h-2 rounded-full bg-white mx-auto my-auto mt-2"})},e)),(0,r.jsxs)("form",{onSubmit:eS,className:"flex items-center gap-1 ml-2",style:{minWidth:0},children:[(0,r.jsx)("input",{type:"color",value:em,onChange:e=>eb(e.target.value),className:"w-6 h-6 rounded-full border border-[#ddd] cursor-pointer",style:{padding:0,background:"none"},title:"Add new color"}),(0,r.jsx)("button",{type:"submit",className:"px-1 py-0.5 rounded bg-accent/40 hover:bg-accent/60 text-xs text-earth-700 border border-accent",tabIndex:-1,title:"Add color",children:"+"})]})]}),(0,r.jsx)("div",{className:"w-full mt-2 mb-1 px-1 py-1 rounded bg-white border border-accent text-xs text-earth-700",style:{fontFamily:ed||void 0,fontWeight:V?"bold":void 0,fontStyle:ei?"italic":void 0,textDecoration:el?"underline":void 0,color:X,minHeight:24},children:q||"Font preview"}),(0,r.jsx)("button",{type:"button",className:"ml-2 px-2 py-1 rounded bg-accent/40 hover:bg-accent/60 text-earth-700 text-xs",onClick:()=>t(!1),tabIndex:-1,children:"Done"})]})]})},{})]}):(0,r.jsxs)("div",{className:N("flex-1 truncate transition-colors flex items-center","heading"===l.type&&"text-2xl font-playfair font-bold","subheading"===l.type&&"text-xl font-medium","hover:bg-pale-beige/80 rounded px-1 cursor-pointer"),style:{color:X||"#000",fontWeight:V?"bold":void 0,fontStyle:ei?"italic":void 0,textDecoration:el?"underline":void 0,fontFamily:(void 0!==ed?ed:"")||void 0},onClick:()=>{J(er(G)),$(l.headingColor||"#000000"),ee(!!l.headingBold),ea(!!l.headingItalic),eo(!!l.headingUnderline),M(!0)},title:"Click to edit title",children:[er(G)||(0,r.jsx)("span",{className:"italic text-earth-400",children:"heading"===l.type?"Click to add a heading…":"Click to add a subheading…"}),(0,r.jsx)("span",{className:"ml-2 opacity-0 group-hover:opacity-80 transition-opacity",children:(0,r.jsx)(F.A,{size:16})})]})]}),(0,r.jsxs)("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:["heading"===l.type&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>{var e;if(!l.parent)return;let t=C.find(e=>e.id===l.parent);v(l.id,{parent:null!=(e=null==t?void 0:t.parent)?e:null})},disabled:!l.parent,className:"p-1.5 rounded-full hover:bg-light-brown/20 text-light-brown disabled:opacity-30",title:"Outdent",children:(0,r.jsx)(I.A,{size:16})}),(0,r.jsx)("button",{onClick:()=>{let e=ek();e&&v(l.id,{parent:e.id})},disabled:!ek(),className:"p-1.5 rounded-full hover:bg-light-brown/20 text-light-brown disabled:opacity-30",title:"Indent",children:(0,r.jsx)(L.A,{size:16})})]}),"text"!==l.type&&(0,r.jsx)("button",{onClick:()=>b("heading"===l.type?"subheading":"text",l.id),className:"p-1.5 bg-light-brown/10 rounded-full hover:bg-light-brown/20 text-light-brown",title:"Add ".concat("heading"===l.type?"subheading":"text"),children:(0,r.jsx)(a.A,{size:16})}),(0,r.jsx)("button",{onClick:()=>j(l.id),className:"p-1.5 rounded-full hover:bg-red-100 text-red-500",title:"Delete",children:(0,r.jsx)(m.A,{size:16})})]})]}),s&&_&&!k&&(0,r.jsx)("div",{className:N("space-y-2 pb-2","heading"===l.type&&"px-6"),children:s})]})}var ea=n(12364);function el(e){let{parentId:t,beforeId:n=null}=e,{addSection:s}=(0,w.b)(),[p,h]=(0,i.useState)(!1),[g,m]=(0,i.useState)(!1),b=(0,i.useRef)(null);(0,i.useEffect)(()=>{if(p)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e);function e(e){b.current&&!b.current.contains(e.target)&&h(!1)}},[p]);let f=[{type:"text",icon:ea.A,label:"Text",description:"Start writing with plain text"},{type:"heading",icon:l.A,label:"Heading 1",description:"Big section heading"},{type:"subheading",icon:o.A,label:"Heading 2",description:"Medium section heading"},{type:"table",icon:d.A,label:"Table",description:"Create a data table"},{type:"image",icon:c.A,label:"Image",description:"Add an image from URL"},{type:"icon",icon:x.A,label:"Icon Block",description:"Add an icon with text"},{type:"banner",icon:u.A,label:"Banner",description:"Create a colorful banner"}];return(0,r.jsxs)("div",{className:"relative flex items-center h-6 group",onMouseEnter:()=>m(!0),onMouseLeave:()=>{m(!1),p||h(!1)},children:[(0,r.jsx)("button",{className:"absolute left-0 z-10 w-6 h-6 flex items-center justify-center rounded-full bg-white border border-earth-200 shadow-sm transition-all\n          ".concat(g||p?"opacity-100 scale-100":"opacity-0 scale-90 pointer-events-none","\n          hover:bg-earth-100 hover:border-accent"),style:{top:"50%",transform:"translateY(-50%)"},onClick:()=>h(e=>!e),tabIndex:0,"aria-label":"Add block",children:(0,r.jsx)(a.A,{size:14})}),(0,r.jsx)("div",{className:"w-full h-px bg-earth-100 transition-colors ".concat(g?"bg-accent/30":"")}),p&&(0,r.jsx)("div",{ref:b,className:"absolute left-8 top-1/2 -translate-y-1/2 bg-white border border-earth-200 rounded-lg shadow-lg py-2 z-20 min-w-[240px] animate-fade-in",children:f.map(e=>{let{type:i,icon:a,label:l,description:o}=e;return(0,r.jsxs)("button",{onClick:()=>{s(i,t,n),h(!1)},className:"w-full px-4 py-3 flex items-center gap-3 hover:bg-earth-50 transition-colors text-left",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded bg-earth-100 flex items-center justify-center",children:(0,r.jsx)(a,{size:16,className:"text-earth-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium text-earth-800",children:l}),(0,r.jsx)("div",{className:"text-sm text-earth-500",children:o})]})]},i)})})]})}var eo=n(14312),es=n(43028),ed=n.n(es);function ec(e){var t;let{section:n,getChildSections:i,level:a=1,parentType:l=null,isFirst:o=!1}=e;if(!n)return null;let s=i(n.id),d="div",c={},x={marginBottom:22,marginTop:18*!o,paddingLeft:0,paddingTop:2,paddingBottom:2,width:"100%",boxSizing:"border-box",position:"relative"};if("subheading"===n.type)return(0,r.jsxs)("div",{style:{background:"#fff",border:"1.5px solid #e8ded4",borderRadius:16,padding:"16px 20px",marginBottom:22,marginTop:18*!o,width:"100%",boxSizing:"border-box",position:"relative"},children:[(0,r.jsx)("h2",{style:{fontFamily:"Inter, sans-serif",fontWeight:700,fontSize:"1.25rem",margin:0,marginBottom:8,color:n.headingColor||"#bfae9b",textDecoration:n.headingUnderline?"underline":void 0,fontStyle:n.headingItalic?"italic":void 0,letterSpacing:"-0.5px",textAlign:"left",lineHeight:1.3},children:n.content}),s&&s.length>0&&(0,r.jsx)("div",{style:{marginTop:0},children:s.map((e,t)=>(0,r.jsx)(ec,{section:e,getChildSections:i,level:a+1,parentType:n.type,isFirst:0===t},e.id))})]});if("table"===n.type&&n.content&&n.content.rows){let e=n.content.rows,t=n.content.hasHeader;return(0,r.jsx)("div",{style:{background:"#fff",border:"1.5px solid #e8ded4",borderRadius:16,padding:"16px 20px",marginBottom:22,marginTop:18*!o,width:"100%",boxSizing:"border-box",position:"relative"},children:(0,r.jsxs)("table",{style:{borderCollapse:"collapse",width:"100%",margin:"0",fontSize:15},children:[(0,r.jsx)("thead",{children:(0,r.jsx)("tr",{children:e[0].map((e,n)=>(0,r.jsx)("th",{style:{border:"1px solid #e8ded4",padding:"6px 10px",background:t?"#f7ede2":"#fff",fontWeight:600,position:"relative"},children:e},n))})}),(0,r.jsx)("tbody",{children:e.slice(1).map((e,t)=>(0,r.jsx)("tr",{children:e.map((e,t)=>(0,r.jsx)("td",{style:{border:"1px solid #e8ded4",padding:"6px 10px",background:"#fff",fontWeight:400},children:e},t))},t))})]})})}return"text"===n.type&&(d="div",c={style:{fontFamily:"Inter, sans-serif",fontSize:"1.05rem",marginBottom:"0.5em",color:"#2d1c0f",lineHeight:1.7},dangerouslySetInnerHTML:{__html:n.content||""}},"heading"===l?(x.background="#fff",x.border="1.5px solid #e8ded4",x.borderRadius=12,x.padding="12px 16px 8px 16px",x.marginBottom=10,x.boxShadow="0 1px 4px 0 rgba(92,67,46,0.02)"):(x.background="none",x.border="none",x.borderRadius=0,x.padding=0,x.marginBottom=10,x.boxShadow="none"),x.width="100%",x.boxSizing="border-box"),"image"===n.type&&n.content&&n.content.url&&(d="figure",c={style:{textAlign:n.content.alignment||"center",margin:0}},x.background="none",x.border="none",x.boxShadow="none",x.padding=0,x.marginBottom=18),"icon"===n.type&&n.content&&(d="div",c={style:{display:"flex",alignItems:"center",gap:8,fontSize:18,color:n.content.color||"#3B82F6",fontWeight:500}},x.background="none",x.border="none",x.boxShadow="none",x.padding=0,x.marginBottom=12),"banner"===n.type&&n.content&&(d="div",c={style:{background:n.content.color||("info"===n.content.type?"#e0f7fa":"warning"===n.content.type?"#fff3cd":"success"===n.content.type?"#d1f7c4":"danger"===n.content.type?"#ffe0e0":"#e6e6e6"),color:n.content.textColor||"#333",borderRadius:8,padding:"12px 20px",display:"flex",alignItems:"center",gap:10,fontWeight:500,border:"1.5px solid #e8ded4"}},x.background="none",x.border="none",x.boxShadow="none",x.padding=0,x.marginBottom=14),(0,r.jsxs)("div",{style:x,children:["image"===n.type&&n.content&&n.content.url?(0,r.jsxs)("figure",{style:{textAlign:n.content.alignment||"center",margin:0},children:[(0,r.jsx)("img",{src:n.content.url,alt:n.content.alt||"",style:{maxWidth:"100%",width:n.content.width||"auto",borderRadius:8,margin:"0 auto"}}),n.content.caption&&(0,r.jsx)("figcaption",{style:{fontSize:13,color:"#8A6F53",marginTop:4},children:n.content.caption})]}):"icon"===n.type&&n.content?(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,fontSize:18,color:n.content.color||"#3B82F6",fontWeight:500},children:[(0,r.jsx)("span",{style:{fontSize:28,marginRight:6},children:(t=n.content.icon)&&({Star:"★",Smile:"\uD83D\uDE0A",Flag:"⚑",CheckSquare:"☑️",Image:"\uD83D\uDDBC️",Table:"\uD83D\uDCCA",Type:"✏️",Heading1:"\uD83D\uDD20",Heading2:"\uD83D\uDD21",Code:"\uD83D\uDCBB",Quote:"❝"})[t]||"★"}),(0,r.jsx)("span",{children:n.content.text})]}):"banner"===n.type&&n.content?(0,r.jsxs)("div",{style:c.style,children:[n.content.showIcon&&(0,r.jsx)("span",{style:{fontSize:22,marginRight:8},children:"⚑"}),(0,r.jsx)("span",{children:n.content.text})]}):"table"===n.type&&n.content&&n.content.rows?(0,r.jsx)("table",{style:{borderCollapse:"collapse",width:"100%",margin:"10px 0",fontSize:15},children:(0,r.jsx)("tbody",{children:n.content.rows.map((e,t)=>(0,r.jsx)("tr",{children:e.map((e,i)=>(0,r.jsx)("td",{style:{border:"1px solid #e8ded4",padding:"6px 10px",background:0===t&&n.content.hasHeader?"#f7ede2":"#fff",fontWeight:0===t&&n.content.hasHeader?600:400},children:e},i))},t))})}):["heading","subheading","text"].includes(n.type)?(0,r.jsx)(d,{...c,children:"text"===n.type?null:n.content}):null,s&&s.length>0&&(0,r.jsx)("div",{style:{marginTop:0},children:s.map((e,t)=>(0,r.jsx)(ec,{section:e,getChildSections:i,level:a+1,parentType:n.type,isFirst:0===t},e.id))})]})}function ex(e){let{rootId:t,style:n={}}=e,{sections:i,getChildSections:a}=(0,w.b)(),l=i.find(e=>e.id===t);return l?(0,r.jsx)("div",{className:"bg-white p-8 max-w-4xl mx-auto",style:{fontFamily:'"Inter", sans-serif',lineHeight:"1.6",color:"#4A3B2F",...n},children:(0,r.jsx)(ec,{section:l,getChildSections:a})}):null}var eu=n(42341),ep=n(29812);function eh(e){let{open:t,onClose:n,onExport:a,previewContent:l,defaultOptions:o={}}=e,[s,d]=(0,i.useState)({includeBookmarks:!0,pageSize:"A4",orientation:"portrait",...o}),[c,x]=(0,i.useState)(!1);if(!t)return null;let u=()=>{a(s)};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-earth-200",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-earth-800",children:"Export as PDF"}),(0,r.jsx)("button",{onClick:n,className:"p-2 hover:bg-earth-100 rounded-full transition-colors",children:(0,r.jsx)(X.A,{size:20,className:"text-earth-600"})})]}),(0,r.jsx)("div",{className:"p-6",children:c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)("button",{onClick:()=>x(!1),className:"text-accent hover:text-accent/80 text-sm",children:"← Back to options"})}),(0,r.jsx)("div",{className:"border border-earth-200 rounded-lg overflow-hidden max-h-96 overflow-y-auto",children:l}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end mt-4",children:[(0,r.jsx)("button",{onClick:n,className:"px-4 py-2 text-earth-600 hover:bg-earth-100 rounded-md transition-colors",children:"Cancel"}),(0,r.jsxs)("button",{onClick:u,className:"px-4 py-2 bg-accent text-white rounded-md hover:bg-accent/90 transition-colors flex items-center gap-2",children:[(0,r.jsx)(ep.A,{size:16}),"Export PDF"]})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-earth-700 mb-2",children:"Page Size"}),(0,r.jsxs)("select",{value:s.pageSize,onChange:e=>d(t=>({...t,pageSize:e.target.value})),className:"w-full p-2 border border-earth-300 rounded-md focus:ring-2 focus:ring-accent focus:border-accent",children:[(0,r.jsx)("option",{value:"A4",children:"A4"}),(0,r.jsx)("option",{value:"Letter",children:"Letter"}),(0,r.jsx)("option",{value:"Legal",children:"Legal"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-earth-700 mb-2",children:"Orientation"}),(0,r.jsxs)("select",{value:s.orientation,onChange:e=>d(t=>({...t,orientation:e.target.value})),className:"w-full p-2 border border-earth-300 rounded-md focus:ring-2 focus:ring-accent focus:border-accent",children:[(0,r.jsx)("option",{value:"portrait",children:"Portrait"}),(0,r.jsx)("option",{value:"landscape",children:"Landscape"})]})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",id:"includeBookmarks",checked:s.includeBookmarks,onChange:e=>d(t=>({...t,includeBookmarks:e.target.checked})),className:"rounded border-earth-300 text-accent focus:ring-accent"}),(0,r.jsx)("label",{htmlFor:"includeBookmarks",className:"ml-2 text-sm text-earth-700",children:"Include bookmarks for navigation"})]})]}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,r.jsxs)("button",{onClick:()=>x(!0),className:"px-4 py-2 text-earth-600 hover:bg-earth-100 rounded-md transition-colors flex items-center gap-2",children:[(0,r.jsx)(eu.A,{size:16}),"Preview"]}),(0,r.jsx)("button",{onClick:n,className:"px-4 py-2 text-earth-600 hover:bg-earth-100 rounded-md transition-colors",children:"Cancel"}),(0,r.jsxs)("button",{onClick:u,className:"px-4 py-2 bg-accent text-white rounded-md hover:bg-accent/90 transition-colors flex items-center gap-2",children:[(0,r.jsx)(ep.A,{size:16}),"Export PDF"]})]})]})})]})})}function eg(){let{sections:e,activeSection:t,updateSection:n,reorderSections:a,getChildSections:l,setActiveSection:o}=(0,w.b)(),[s,d]=i.useState(null),c=(0,v.FR)((0,v.MS)(v.AN,{activationConstraint:{distance:8}})),[x,u]=i.useState(null);i.useEffect(()=>{let n=e.find(e=>e.id===t);n&&!["text","table","image","icon","banner"].includes(n.type)&&u(null)},[t,e]);let p=e.find(e=>e.id===t)||{},h="text"===p.type?p.id:t,g=e.find(e=>e.id===h),m=i.useRef();async function b(t){if(!m.current)return;let n=await ed()(m.current,{backgroundColor:"#F1EEEB",scale:2,useCORS:!0}),r=n.toDataURL("image/png"),i=new eo.Ay({orientation:"portrait",unit:"pt",format:"a4"}),a=i.internal.pageSize.getWidth(),o=i.internal.pageSize.getHeight(),s={width:n.width,height:n.height},d=Math.min(a/s.width,o/s.height),c=s.width*d,x=s.height*d;i.addImage(r,"PNG",(a-c)/2,40,c,x),g&&i.outline&&"function"==typeof i.outline.add&&Array.isArray(i.outline)&&!function e(t,n){for(let r of t){let t=i.outline.add(r.title,{pageNumber:1},n);r.children&&r.children.length>0&&e(r.children,t)}}(function e(t,n,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=t.find(e=>e.id===r);if(!a)return[];let l=[];return("heading"===a.type||"subheading"===a.type)&&l.push({title:a.content||"Untitled",level:i,id:a.id,children:e(t,n,a.id,i+1)}),l.push(...e(t,n,a.id,i+1)),l}(e,l,g.id,0),null),i.save("proibe-notes.pdf")}let[f,j]=(0,i.useState)(!1);return(0,r.jsxs)("div",{className:"flex-1 flex flex-col bg-gradient-to-br from-soft-peach to-pale-beige overflow-hidden",children:[(0,r.jsx)("div",{className:"flex items-center justify-end px-4 pt-4 gap-2",children:(0,r.jsx)("button",{onClick:()=>j(!0),className:"px-4 py-2 bg-accent text-white rounded shadow hover:bg-accent/80 transition",children:"Export as PDF"})}),(0,r.jsx)(eh,{open:f,onClose:()=>j(!1),onExport:e=>{j(!1),b(e)},previewContent:(0,r.jsx)(ex,{rootId:null==g?void 0:g.id,style:{boxShadow:"none",border:"none",margin:0,background:"transparent"}}),defaultOptions:{}}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto px-4 py-6",children:[(0,r.jsx)("div",{style:{position:"absolute",left:"-200vw",top:0,width:"900px",minHeight:"100px",pointerEvents:"none",zIndex:-1,opacity:1},children:(0,r.jsx)("div",{ref:m,id:"pdf-print-view",children:g&&(0,r.jsx)(ex,{rootId:g.id})})}),g?(0,r.jsxs)(v.Mp,{sensors:c,collisionDetection:function(t){let n=e.find(e=>e.id===s);return(null==n?void 0:n.type)!=="heading"?(0,v.y$)(t):(0,v.Qo)(t)},onDragStart:function(e){let{active:t}=e;d(t.id)},onDragEnd:function(t){let{active:r,over:i}=t;if(d(null),!(null==r?void 0:r.id)||!(null==i?void 0:i.id))return;let l=e.find(e=>e.id===r.id),o=e.find(e=>e.id===i.id);if(l&&o){if("heading"===o.type&&["subheading","text","table","image","icon","banner"].includes(l.type)||"subheading"===o.type&&["text","table","image","icon","banner"].includes(l.type))return void n(l.id,{parent:o.id});if(l.parent===o.parent){l.id!==o.id&&a(l.id,o.id);return}n(l.id,{parent:o.parent}),a(l.id,o.id)}},children:[(0,r.jsx)(y.gB,{items:l(g.id).map(e=>e.id),strategy:y._G,children:function t(a){arguments.length>1&&void 0!==arguments[1]&&arguments[1];let s=e.find(e=>e.id===a);if(!s)return null;if(["text","table","image","icon","banner"].includes(s.type))return(0,r.jsx)(ei,{section:s,onSave:(t,r)=>{n(t,{content:r});let i=e.find(e=>e.id===s.parent);o(i?i.id:s.id),u(null)},isEditing:x===s.id,onEdit:e=>u(e)},s.id);let d=l(s.id);return(0,r.jsx)(ei,{section:s,onSave:(e,t)=>{n(e,{content:t})},children:(0,r.jsxs)(y.gB,{items:d.map(e=>e.id),strategy:y._G,children:[0===d.length&&(0,r.jsx)(el,{parentId:s.id}),d.map((e,n)=>(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(el,{parentId:s.id,beforeId:e.id}),t(e.id,s.type),n===d.length-1&&(0,r.jsx)(el,{parentId:s.id})]},e.id))]})},s.id)}(g.id)}),(0,r.jsx)(v.Hd,{children:s&&(0,r.jsx)(ei,{section:e.find(e=>e.id===s),onSave:()=>{},isDraggingOverlay:!0})})]}):(0,r.jsx)("p",{className:"text-earth-700 italic",children:"Select a heading or subheading to begin editing…"})]})]})}var em=n(95952),eb=n(48230),ef=n.n(eb);let ev={hidden:{},show:{transition:{staggerChildren:.1,delayChildren:.3}}},ey={hidden:{opacity:0,y:-10},show:{opacity:1,y:0,transition:{type:"spring",stiffness:120,damping:20}}};function ej(e){let{headerBg:t,setHeaderBg:n}=e,a=(0,i.useRef)();return(0,r.jsxs)("header",{className:"relative overflow-hidden bg-earth-200 border-b border-accent/40 min-h-[180px] flex items-end group",style:t?{backgroundImage:"url(".concat(t,")"),backgroundSize:"cover",backgroundPosition:"center"}:{},children:[t&&(0,r.jsx)("div",{className:"absolute inset-0 bg-black/30 pointer-events-none"}),(0,r.jsx)("div",{className:"absolute -top-32 -right-32 w-72 h-72 bg-accent rounded-full opacity-30 blur-3xl animate-pulse z-10"}),(0,r.jsxs)("div",{className:"absolute top-3 right-4 z-30 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,r.jsxs)("button",{className:"flex items-center gap-1 px-3 py-1.5 bg-white/80 hover:bg-white/90 rounded shadow text-earth-700 text-xs font-medium",onClick:()=>a.current&&a.current.click(),title:t?"Change banner image":"Add banner image",children:[(0,r.jsx)(c.A,{size:16}),t?"Change Banner":"Add Banner"]}),t&&(0,r.jsx)("button",{className:"flex items-center px-2 py-1 bg-red-100 hover:bg-red-200 rounded text-red-600 text-xs",onClick:function(){n(null)},title:"Remove banner image",children:(0,r.jsx)(X.A,{size:14})}),(0,r.jsx)("input",{ref:a,type:"file",accept:"image/*",className:"hidden",onChange:function(e){let t=e.target.files[0];if(!t)return;let r=new FileReader;r.onload=e=>{n(e.target.result)},r.readAsDataURL(t)}})]}),(0,r.jsxs)(j.P.div,{className:"relative z-20 flex items-center justify-between px-10 py-6 w-full",variants:ev,initial:"hidden",animate:"show",children:[(0,r.jsx)(j.P.div,{variants:ey,className:"flex items-center space-x-3",children:(0,r.jsx)(ef(),{href:"/landing",legacyBehavior:!0,children:(0,r.jsxs)("a",{className:"flex items-center gap-2 group hover:opacity-80 transition",children:[(0,r.jsx)(em.A,{size:28,className:"text-earth-700 drop-shadow group-hover:text-accent transition"}),(0,r.jsx)("h1",{className:"text-3xl font-playfair font-bold text-earth-100 drop-shadow-lg group-hover:text-accent transition",children:"Proibe"})]})})}),(0,r.jsxs)(j.P.div,{variants:ey,className:"relative inline-block",children:[(0,r.jsx)("p",{className:"text-sm italic text-earth-100 drop-shadow",children:"Beautiful note-taking made simple"}),(0,r.jsx)(j.P.span,{className:"absolute left-0 bottom-0 h-[2px] bg-earth-100",initial:{width:0},animate:{width:"100%"},transition:{delay:.6,duration:.8,ease:"easeInOut"}})]})]})]})}function ew(){let[e,t]=(0,i.useState)(null);return(0,r.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,r.jsx)(ej,{headerBg:e,setHeaderBg:t}),(0,r.jsxs)("main",{className:"flex flex-1 overflow-hidden",children:[(0,r.jsx)(k,{}),(0,r.jsx)("div",{className:"flex-1 flex flex-col items-stretch justify-start px-0 py-0",children:(0,r.jsx)("div",{className:"w-full h-full flex flex-col",children:(0,r.jsx)(eg,{})})})]})]})}}}]);